<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="color-scheme" content="dark light"><title>How to F# - Part 4</title><meta name="description" content="In part 4 we look at how we make decisions in our code to do one thing or another and how to loop over collections"><meta name="author" content="Devon Burriss"><meta itemprop="name" content="How to F# - Part 4"><meta itemprop="description" content="In part 4 we look at how we make decisions in our code to do one thing or another and how to loop over collections"><meta itemprop="image" content="https://devonburriss.me/img/posts/2018/pipes-500.jpg"><link rel="icon" type="image/png" href="/img/favicon16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon32.png" sizes="32x32"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@DevonBurriss"><meta name="twitter:title" content="How to F# - Part 4"><meta name="twitter:description" content="In part 4 we look at how we make decisions in our code to do one thing or another and how to loop over collections"><meta name="twitter:creator" content="@DevonBurriss"><meta name="twitter:image" content="https://devonburriss.me/img/posts/2018/pipes-500.jpg"><meta property="og:title" content="How to F# - Part 4"><meta property="og:type" content="article"><meta property="og:url" content="https://devonburriss.me/how-to-fsharp-pt-4/"><meta property="og:image" content="https://devonburriss.me/img/posts/2018/pipes-500.jpg"><meta property="og:description" content="In part 4 we look at how we make decisions in our code to do one thing or another and how to loop over collections"><meta property="og:site_name" content="Devon Burriss&#39; Blog"><link rel="stylesheet" href="/css/site.css"><link rel="stylesheet" href="/css/highlight/atom-one-dark.css"><script>(function(){try{var t=localStorage.getItem('theme');if(t==='dark'||t==='light'){document.documentElement.dataset.theme=t;}}catch(e){}})();</script><script src="/js/theme.js" defer="defer"></script><script type="module" src="/js/search-ui.js"></script></head><body><header class="site-header"><nav class="site-nav"><a class="site-title nav-badge" href="/">DEVON BURRISS</a><ul class="site-links"><li><a href="/">Home</a></li><li><a href="/topics/">Topics</a></li><li><a href="/notes/">Notes</a></li><li><a href="/recommended-reading.html">Reading</a></li><li><a href="/about/">About</a></li><li><a href="/rss.xml">RSS</a></li></ul><button type="button" class="theme-toggle" id="theme-toggle" aria-label="Toggle light/dark theme">Theme</button></nav></header><main class="site-main"><span style="display:contents"><header class="page-header"><h1>How to F# - Part 4</h1><p class="page-subtitle">Making decisions with control flow</p><p class="post-meta">Devon Burriss</p></header><div class="topic-pills"><a class="topic-pill" href="/topics/platforms-runtime/" title="Runtimes and execution environments (not frameworks).">Platforms &amp; Runtime</a></div><hr></span><article class="prose"><p>In the <a href="/how-to-fsharp-pt-3">last post</a> we finished off our dive into functions. In this post we will look at control flow. How do we make a branching decision? How do we loop through something until some condition is met?</p>
<!--more-->
<p>I am going to try keep this post short. The reason for this is that although you will invariably need to use control flow expressions in your code, they are stylistically not very functional and there are usually more functional ways to achieve the same thing. We explore those more functional techniques in this and future posts.</p>
<h2 id="if-then-else">If then else</h2>
<p>Other than<code>match</code> (covered later), <code>if</code> is probably the next most useful control flow expression we will touch on in this post. The <code>if</code> expression takes a <code>bool</code> and if <code>true</code> proceeds with the <code>then</code> body. Usually there is an <code>else</code> and we will go through when that is necessary.</p>
<pre><code class="language-fsharp">let b = true
if (b) then printfn &quot;Is true&quot; else printfn &quot;Is false&quot;
</code></pre>
<p>The above will print out <em>Is true</em>, and not print <em>Is false</em>.<br />
Maybe we don't want to print out anything if the value is <code>false</code>. We can do this:</p>
<pre><code class="language-fsharp">let b = true
if (b) then printfn &quot;Is true&quot;
</code></pre>
<p>Now if you changed <code>let b = false</code>, nothing would be printed.</p>
<p>What if we wanted to <strong>return a value</strong> based on some condition though without an <code>else</code>?</p>
<pre><code class="language-fsharp">let v = if(b) then 1 // &lt;- Error: This 'if' expression is missing an 'else' branch.
</code></pre>
<p>At least the error message is pretty clear about what the problem is. With the print example we were returning <code>unit</code> so it didn't matter if nothing was returned. Here the expression has to return a value because we are assigning that value.</p>
<pre><code class="language-fsharp">let v = if(b) then 1 else 0
</code></pre>
<p>So depending on whether <code>b</code> is <code>true</code> or <code>false</code>, <code>v</code> will have a value of <code>1</code> or <code>0</code> respectively.</p>
<p>Lets take a look at something a bit more complex:</p>
<pre><code class="language-fsharp">let divideBy d n = n/d
let numerator = 10
let denominator = 2

let j = if(denominator &lt;&gt; 0) then 
            printfn &quot;Dividing by %i, not 0&quot; denominator
            let x = numerator |&gt; divideBy denominator
            printfn &quot;The answer is %i&quot; x
            x
        else
            printfn &quot;Dividing by 0&quot;
            0
</code></pre>
<blockquote>
<p>Note that we don't have to assign this to a value, here <code>j</code> but it would be pretty pointless to return a value and not use it. The compiler will give you a warning at this point <em>The result of this expression has type &lsquo;int&rsquo; and is implicitly ignored. Consider using &lsquo;ignore&rsquo; to discard this value explicitly, e.g. &lsquo;expr |&gt; ignore&rsquo;, or &lsquo;let&rsquo; to bind the result to a name, e.g. &lsquo;let result = expr&rsquo;.</em><br />
This is asking us to call <code>ignore()</code> in each branch of the <code>if</code> expression.</p>
</blockquote>
<p>We can have multiple lines in either branch, organized by indentation. Just like functions the last expression is what is returned as the value of the <code>if-else</code> expression for each branch.</p>
<h3 id="scope">Scope</h3>
<p>In the previous post I mentioned scope. This is a good opportunity to demonstrate scope. Check out the assigning of the <code>denominator</code> value below.</p>
<pre><code class="language-fsharp">let divideBy d n = n/d
let numerator = 10
let denominator = 0

if(denominator &lt;&gt; 0) then 
    printfn &quot;Dividing by %i, not 0&quot; denominator
    let x = numerator |&gt; divideBy denominator
    printfn &quot;The answer is %i&quot; x
    x
else
    printfn &quot;Dividing by 0&quot;
    let denominator = 1
    printfn &quot;Instead by %i, not 0&quot; denominator
    let x = numerator |&gt; divideBy denominator
    printfn &quot;The answer is %i&quot; x
    x

printfn &quot;Denominator is %i&quot; denominator
</code></pre>
<p>The above prints out the following:</p>
<pre><code class="language-text">Dividing by 0
Instead by 1, not 0
The answer is 10
Denominator is 0
</code></pre>
<p>Notice here how we set a value for <code>denominator</code> within the <code>else</code> branch that shadows the outside one. Once we are back to the scope outside the if, <code>denominator</code> is back to <code>0</code>, even though it was set to <code>1</code> in the <code>else</code> branch. It was <code>1</code> for the scope of the <code>else</code> branch of the expression as it was set in that scope.</p>
<h3 id="if-elseif-else">If / elseif / else</h3>
<p>It is (maybe) worth mentioning that you can have more than 2 branches by using <code>elif</code>.</p>
<pre><code class="language-fsharp">if(x = 1) then printfn &quot;x is 1&quot;
elif (x = 2) then printfn &quot;x is 2&quot;
else printfn &quot;x is not 1 or 2&quot;
</code></pre>
<p>We will briefly cover <code>match</code> next and even when <strong>if / else</strong> seems a cleaner solution, once you are using <code>elif</code> you almost certainly should be using <code>match</code> instead.</p>
<h2 id="match">Match</h2>
<p>We will hopefully cover pattern matching in more detail in a later entry but no coverage of functional control flow is complete without <code>match</code>.</p>
<p>Lets re-write the previous example using <code>match</code>:</p>
<pre><code class="language-fsharp">match x with
| 1 -&gt; printfn &quot;x is 1&quot;
| 2 -&gt; printfn &quot;x is 2&quot;
| _ -&gt; printfn &quot;x is not 1 or 2&quot;
</code></pre>
<p>Note that <code>_</code> is a catch-all, like else is.<br />
This is a much cleaner and more functional way to do control flow. A nice benefit here is that the compiler gives you a warning if you are not matching exhaustively on all options of the matched value.</p>
<p>We will hopefully circle around to <code>match</code> again when covering pattern matching as <code>match</code> is far more powerful than demonstrated here.</p>
<p><a href="https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/match-expressions">Microsoft docs</a></p>
<h2 id="for.in">for..in</h2>
<p>If you need to loop through an entire collection and do something you could use the <code>for pattern in enumerable-expression do body-expression</code> syntax. This is like <code>foreach</code> in many other languages. Lets see what that looks like:</p>
<pre><code class="language-fsharp">let numbers = [1..10]
for x in numbers do
    printf &quot;%i &quot; x
</code></pre>
<blockquote>
<p>Output: 1 2 3 4 5 6 7 8 9 10</p>
</blockquote>
<p>See how you can easily create a range of values using <code>start..finish</code> syntax. We use this to define <code>numbers</code>. Then for each element of the list we print the value which is in <code>x</code>.</p>
<p>We will hopefully cover collections in an upcoming post but for interest sake lets see how this would be done in a more functional way.</p>
<pre><code class="language-fsharp">let numbers = [1..10]
numbers |&gt; List.iter (printf &quot;%i &quot;)
</code></pre>
<p>Unsurprisingly the functional approach is to call the <code>iter</code> function on the <code>List</code> module. This <code>iter</code> function has the signature <code>('T -&gt; unit) -&gt; 'T list -&gt; unit</code>. Lets break that down:</p>
<ul>
<li><code>('T -&gt; unit)</code>: a function defining the action to take for each element in the list</li>
<li><code>'T list</code>: the list to iterate through</li>
<li><code>unit</code>: returns unit so this function is designed to iterate through a function and do something, not return a value</li>
</ul>
<p>There are many more functions for working with lists in the <code>List</code> module and matching ones for <code>Array</code> and <code>Seq</code>.</p>
<p><a href="https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/loops-for-in-expression">Microsoft docs</a></p>
<h2 id="for.to">for..to</h2>
<p>While <code>for..in</code> is for iterating over a collection, <code>for..to</code> allows you to iterate from a start value to another. This is like a <code>for</code> loop in other languages.</p>
<pre><code class="language-fsharp">let ns = [|1..10..100|]
for i=0 to ((Array.length ns)/2) do
    printf &quot;%i &quot; (Array.get ns i)
</code></pre>
<blockquote>
<p>Output: 1 11 21 31 41 51</p>
</blockquote>
<p>In our example we have an array that has numbers 1 to a 100 in increments of 10. We only iterate through half the list.</p>
<p><a href="https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/loops-for-to-expression">Microsoft docs</a></p>
<h2 id="while">while</h2>
<p>What if we want to iterate until a certain condition is true? The following code gets a random number until that number is <code>7</code>.</p>
<pre><code class="language-fsharp">let random = new System.Random()
let aNumber() = random.Next(1,10)
let mutable n = 0
while (n &lt;&gt; 7) do
    printf &quot;%i &quot; n
    n &lt;- aNumber()
</code></pre>
<blockquote>
<p>Output: 0 9 9 1 6 5 2 2 6 6 2 6 6 1 2 3 6 8 8 1 3 2 2</p>
</blockquote>
<p>We kept going through the <code>while</code> loop until <code>aNumber()</code> returned <code>7</code>.</p>
<p><a href="https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/loops-while-do-expression">Microsoft docs</a></p>
<h2 id="conclusion">Conclusion</h2>
<p>In this post we looked at ways to represent branching logic and ways to iterate over values. Remember that much of this is a very imperative approach and as such is not used a lot in the function paradigm. We looked at some functional techniques for dealing with branching and looping and will continue this in future articles. Next up we look at <a href="/how-to-fsharp-pt-5">Pattern Matching</a>.</p>
<h2 id="credits">Credits</h2>
<ol>
<li><a href="https://unsplash.com/@spacexuan">Crystal Kwok</a></li>
</ol>
</article><hr><nav class="pager"><ul class="pager-links"><li><a href="/how-to-fsharp-pt-5/" title="How to F# - Part 5">← Previous</a></li><li><a href="/how-to-fsharp-pt-3/" title="How to F# - Part 3">Next →</a></li></ul></nav></main><footer class="site-footer"><p>Copyright &#169; <a href="/about/">Devon Burriss</a> 2026</p></footer><div class="comments"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'devonburriss';(function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://devonburriss.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45750611-2', 'auto');ga('send', 'pageview');</script></body></html>