<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="color-scheme" content="dark light"><title>Installing Docker on Hyper-V</title><meta name="description" content="Installing Docker on Windows"><meta name="author" content="Devon Burriss"><meta itemprop="name" content="Installing Docker on Hyper-V"><meta itemprop="description" content="Installing Docker on Windows"><meta itemprop="image" content="https://devonburriss.me/img/explore-590.jpg"><link rel="icon" type="image/png" href="/img/favicon16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon32.png" sizes="32x32"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@DevonBurriss"><meta name="twitter:title" content="Installing Docker on Hyper-V"><meta name="twitter:description" content="Installing Docker on Windows"><meta name="twitter:creator" content="@DevonBurriss"><meta name="twitter:image" content="https://devonburriss.me/img/explore-590.jpg"><meta property="og:title" content="Installing Docker on Hyper-V"><meta property="og:type" content="article"><meta property="og:url" content="https://devonburriss.me/installing-docker-on-hyper-v/"><meta property="og:image" content="https://devonburriss.me/img/explore-590.jpg"><meta property="og:description" content="Installing Docker on Windows"><meta property="og:site_name" content="Devon Burriss&#39; Blog"><link rel="stylesheet" href="/css/site.css"><link rel="stylesheet" href="/css/highlight/atom-one-dark.css"><script>(function(){try{var t=localStorage.getItem('theme');if(t==='dark'||t==='light'){document.documentElement.dataset.theme=t;}}catch(e){}})();</script><script src="/js/theme.js" defer="defer"></script><script type="module" src="/js/search-ui.js"></script></head><body><header class="site-header"><nav class="site-nav"><a class="site-title nav-badge" href="/">DEVON BURRISS</a><ul class="site-links"><li><a href="/">Home</a></li><li><a href="/topics/">Topics</a></li><li><a href="/notes/">Notes</a></li><li><a href="/recommended-reading.html">Reading</a></li><li><a href="/about/">About</a></li><li><a href="/rss.xml">RSS</a></li></ul><button type="button" class="theme-toggle" id="theme-toggle" aria-label="Toggle light/dark theme">Theme</button></nav></header><main class="site-main"><span style="display:contents"><header class="page-header"><h1>Installing Docker on Hyper-V</h1><p class="post-meta">Devon Burriss &#183; Mar 07, 2015</p></header><hr></span><article class="prose"><p>To be clear, currently Docker containers do not run on Windows. Microsoft is working with Docker to release something with feature parity but we will be lucky if we see that in 2015 (<a href="http://weblogs.asp.net/scottgu/docker-and-microsoft-integrating-docker-with-windows-server-and-microsoft-azure">Blogged by Scott Gu</a>). So although there is a client for Windows for managing Docker containers, we will need an Ubuntu install. <a href="http://devonburriss.me/installing-ubuntu-on-hyper-v/">Installing Ubuntu on Hyper-V</a></p>
<p><img src="/img/posts/2015/large_h.png" alt="Docker logo" /></p>
<!--more-->
<h1 id="installing-docker">Installing Docker</h1>
<p>Most of this is straight from the <a href="https://docs.docker.com/installation/ubuntulinux/">Docker documentation</a> but I ran into a few problems that I think may be due to this running on Hyper-V. Also I wanted a quick reference in the future.</p>
<p>First lets update our package repositories:<br />
<code>sudo apt-get update</code></p>
<p>Currently the Docker docs mention pulling from their private repos to get the latest version but that was for Ubuntu 14.04. I noticed Ubuntu 14.10 repos contain Docker 1.2 which is at time of writing good enough for me.</p>
<p>So lets install Docker:<br />
<code>sudo apt-get install docker.io</code></p>
<p>Then so we get bash completion we can type:<br />
<code>source /etc/bash_completion.d/docker.io</code><br />
No <strong>sudo</strong> needed. Alternatively just reboot with:<br />
<code>sudo reboot</code></p>
<p>Lets test our Docker install:<br />
<code>sudo docker version</code><br />
<code>sudo docker info</code></p>
<p>This displays version number of the components and some basic info on the install respectively.</p>
<p>The info will contain a line <strong>WARNING: No swap limit support</strong> so lets fix that.<br />
<code>sudo nano /etc/default/grub</code></p>
<p>Find the line <strong>GRUB___CMDLINE___LINUX</strong> and edit it:<br />
<code>GRUB_CMDLINE_LINUX=&quot;cgroup_enable=memory swapaccount=1&quot;</code> then save and exit nano.</p>
<p>We need to update Grub and reboot.<br />
<code>sudo update-grub</code></p>
<p><code>sudo reboot</code></p>
<p>Now running <code>sudo docker info</code> you will see the warning is gone.</p>
<p>If we try download and run a docker image we are still not there yet but lets try:<br />
<code>sudo docker run -i -t ubuntu /bin/bash</code></p>
<h3 id="troubleshooting">Troubleshooting</h3>
<h4 id="unexpected-eof">Unexpected EOF</h4>
<p>This actually happens every now and again with Docker (I think if latency is bad) so just try run the command again and it will likely work.</p>
<h4 id="dial-tcp-lookup-registery-1.docker.io-no-such-host">dial tcp: lookup registery-1.docker.io: no such host</h4>
<p>The documentation explains how to add a dns to the docker options in <strong>/etc/default/docker</strong> but this actually didn't work for me on the Hyper-V. I had to edit <strong>/etc/resolv.conf</strong> and add the google nameserver there (doesn't have to be google).<br />
<code>sudo nano /etc/resolv.conf</code><br />
Then add <strong>nameserver 8.8.8.8</strong> on a new line. Save and exit.<br />
You might need to <code>sudo reboot</code>.</p>
<h3 id="finally-lets-run-something">Finally lets run something</h3>
<p>So now we should be ready to go. Run<br />
<code>sudo docker run -i -t ubuntu /bin/bash</code> again.<br />
This should now pull down the ubuntu image and start up a container running ubuntu (yes we are running Ubuntu in a kernal process on another Ubuntu - inception right?).<br />
The <code>-t</code> is to assign a terminal and <code>-i</code> is so the connection is interactive.<br />
Once it is running a terminal prompt will be available. Type <code>echo 'Hi'</code>. The Ubuntu container willl say hi back üòÉ</p>
<p>So thats it. You have Docker running on a Hyper-V guest.</p>
</article><hr><nav class="pager"><ul class="pager-links"><li><a href="/installing-ubuntu-on-hyper-v/" title="Installing Ubuntu on Hyper-V">‚Üê Previous</a></li><li><a href="/aspnet-vsonline-ci/" title="ASP.NET 5 CI from Git to Azure without Visual Studio">Next ‚Üí</a></li></ul></nav></main><footer class="site-footer"><p>Copyright &#169; <a href="/about/">Devon Burriss</a> 2026</p></footer><div class="comments"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'devonburriss';(function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://devonburriss.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45750611-2', 'auto');ga('send', 'pageview');</script></body></html>