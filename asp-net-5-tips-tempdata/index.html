<!DOCTYPE html>
<html><head><!-- META --><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>ASP.NET 5 Tips: TempData</title><meta name="description" content="Just hold this."><meta name="author" content="Devon Burriss"><link rel="canonical" href="https://devonburriss.me/asp-net-5-tips-tempdata/"><meta itemprop="datePublished" content="2016-01-17" id="date"><meta itemprop="dateModified" content="2016-01-17" id="mdate"><meta itemprop="headline" content="ASP.NET 5 Tips: TempData - Just hold this."><meta itemprop="mainEntityOfPage" content="https://devonburriss.me/asp-net-5-tips-tempdata/"><meta name="headline" content="ASP.NET 5 Tips: TempData - Just hold this."><link rel="icon" type="image/png" href="/img/favicon16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon32.png" sizes="32x32"><meta itemprop="name" content="ASP.NET 5 Tips: TempData"><meta itemprop="description" content="Just hold this."><meta itemprop="image" content="https://devonburriss.me/img/explore-590.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@DevonBurriss"><meta name="twitter:title" content="ASP.NET 5 Tips: TempData"><meta name="twitter:description" content="Just hold this."><meta name="twitter:creator" content="@DevonBurriss"><meta name="twitter:image" content="https://devonburriss.me/img/explore-590.jpg"><meta property="og:title" content="ASP.NET 5 Tips: TempData"><meta property="og:type" content="article"><meta property="og:url" content="https://devonburriss.me/asp-net-5-tips-tempdata/"><meta property="og:image" content="https://devonburriss.me/img/explore-590.jpg"><meta property="og:description" content="Just hold this."><meta property="og:site_name" content="Devon Burriss&#39; Blog"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/clean-blog.css"><link rel="stylesheet" charset="UTF-8" href="/css/highlight/atom-one-light.css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--></head><body><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Devon Burriss&#39; Blog</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li><a href="/recommended-reading.html">Recommended Reading</a></li><li><a href="/rss.xml"><span class="fa-stack fa-lg"><i class="fa fa-rss fa-stack-1x"></i></span></a></li></ul></div></div></nav><header class="intro-header" style="background-image: url(&#39;/img/backgrounds/explore-bg.jpg&#39;)"><div class="container-fluid"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><div class="frame"><h1>ASP.NET 5 Tips: TempData</h1><h2 class="subheading">Just hold this.</h2><span class="meta" itemprop="author" itemscope="" itemtype="https://schema.org/Person">Posted by <span itemprop="name">Devon Burriss</span> on January 17, 2016</span><div></div></div></div></div></div></div></header><article><div class="container-fluid"><div class="row"><div class="col-lg-8"><blockquote>
<p>NOTE: Handling TempData and Session is made easy with extension methods in the <a href="https://www.nuget.org/packages/BetterSession.AspNet.Mvc/">BetterSession</a> Nuget package.</p>
</blockquote>
<p>ASPNET 5 is designed to be configurable. It starts out with almost nothing and you choose what you need. In previous versions of MVC we got TempData out the box. Not so with the new iteration.</p>
<p><img src="/img/posts/2016/footprint-resized.jpg" alt="bridge cables" /></p>
<!--more-->
<p>So to enable TempData for MVC you need sessions.
In <strong>project.json</strong> add the following lines to <em>dependencies</em></p>
<p>{% highlight csharp %}
&quot;Microsoft.AspNet.Session&quot;: &quot;1.0.0-<em>&quot;,
&quot;Microsoft.Extensions.Caching.Memory&quot;: &quot;1.0.0-</em>&quot;
{% endhighlight %}</p>
<p>In <strong>Startup.cs</strong> the configuration of your services will need the following:</p>
<p>{% highlight csharp %}
public void ConfigureServices(IServiceCollection services)
{
services.AddCaching();
//this is the NB line for this post
services.AddSession(o =&gt;
);
services.AddMvc();
}
{% endhighlight %}</p>
<p>While the app builder configuration will be something like so:</p>
<p>{% highlight csharp %}
public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)
{
loggerFactory.AddConsole(Configuration.GetSection(&quot;Logging&quot;));
loggerFactory.AddDebug();
//this is the NB line for this post
app.UseSession();
app.UseIISPlatformHandler();
app.UseStaticFiles();
app.UseMvc();
}
{% endhighlight %}</p>
<p>Then accessing TempData is done through the dependency injection/service locator:</p>
<p>{% highlight csharp %}
public class TempController : Controller
{
private const string key = &quot;name&quot;;
private readonly ITempDataDictionary _tempData;</p>
<p>public TempController(ITempDataDictionary tempData)</p>
<p>public IActionResult Index()
{
_tempData[key] = &quot;Devon&quot;;
return RedirectToAction(&quot;Carry&quot;);
}</p>
<p>public IActionResult Carry()
{
return View(&quot;Index&quot;, _tempData[key]);
}
}
{% endhighlight %}</p>
<p>OR</p>
<p>{% highlight csharp %}
var tempData = HttpContext.RequestServices.GetRequiredService<ITempDataDictionary>();
{% endhighlight %}</p>
<blockquote>
<p>NOTE 1: When using ITempDataDictionary in a custom <strong>ActionResult</strong> I needed to mark the class with <strong>IKeepTempDataResult</strong> for it to work.</p>
</blockquote>
<blockquote>
<p>NOTE 2: I am not sure if this is going to change but currently the implementation for ITempDataDictionary only accepts primitive values (and string). I got around this by serializing to and from json. If you want to do this, you might find these extension methods useful.</p>
</blockquote>
<p>{% highlight csharp %}
public static void SetAsJson<T>(this ITempDataDictionary tempData, string key, T data)
{
var sData = JsonConvert.SerializeObject(data);
tempData[key] = sData;
}</p>
<p>public static T GetFromJson<T>(this ITempDataDictionary tempData, string key)
{
if(tempData.ContainsKey(key))
{
var v = tempData[key];</p>
<pre><code>if(v is T)
{
	return (T)v;
}

if(v is string &amp;&amp; typeof(T) != typeof(string))
{
  var obj = JsonConvert.DeserializeObject&lt;T&gt;((string)v);
  return obj;
}
</code></pre>
<p>}
return default(T);
}
{% endhighlight %}</p>
<p>So hope you and future me finds this post useful. I am going to try blog little things like this as I work more with ASP.NET 5. Please let me know in the comments below if you did find it useful or if I missed anything. Also let me know if there are other topics you want me to cover.</p>
<hr><ul class="pager"><li class="previous"><a href="/aspnet-vsonline-ci/" data-toggle="tooltip" data-placement="top" title="ASP.NET 5 CI from Git to Azure without Visual Studio">&larr; Previous Post</a></li><li class="next"><a href="/asp-net-5-tips-urlhelper/" data-toggle="tooltip" data-placement="top" title="ASP.NET 5 Tips: UrlHelper">Next Post &rarr;</a></li></ul></div><div class="col-lg-4 widget-column"><ul class="list-inline text-center"><li><a href="/rss.xml"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i><i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></li><li><a href="/atom.xml"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></li><li><a href="https://twitter.com/DevonBurriss"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href="https://github.com/dburriss"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><span style="display:contents"><h2><i class="glyphicon glyphicon-th-list"></i>  Topics</h2><a class="badge badge-info" href="/topics/software-design/" title="Architecture, design, modeling, and distributed systems."><span class="site-topic">Software Design</span></a><a class="badge badge-info" href="/topics/engineering-practices/" title="How we build, test, and validate software."><span class="site-topic">Engineering Practices</span></a><a class="badge badge-info" href="/topics/platforms-runtime/" title="Runtimes and execution environments (not frameworks)."><span class="site-topic">Platforms &amp; Runtime</span></a><a class="badge badge-info" href="/topics/tooling-automation/" title="Build tooling, CI/CD, editors, and developer automation."><span class="site-topic">Tooling &amp; Automation</span></a><a class="badge badge-info" href="/topics/reliability-observability/" title="Monitoring, metrics, reliability, and failure modes."><span class="site-topic">Reliability &amp; Observability</span></a><a class="badge badge-info" href="/topics/ai-agentic-systems/" title="AI, LLMs, and agentic workflows."><span class="site-topic">AI &amp; Agentic Systems</span></a><a class="badge badge-info" href="/topics/leadership-teams/" title="Human systems around software development."><span class="site-topic">Leadership &amp; Teams</span></a><a class="badge badge-info" href="/topics/notes-reflections/" title="Learning, career, ethics, and life-adjacent thinking."><span class="site-topic">Notes &amp; Reflections</span></a></span></div></div></div><hr></article><span style="display:contents"><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><p class="copyright text-muted">Copyright &#169; <a href="/about.html">Devon Burriss</a> 2026</p></div></div></div></footer><script src="/js/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/clean-blog.min.js"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></span><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45750611-2', 'auto');ga('send', 'pageview');</script><div class="container-fluid"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'devonburriss';(function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://devonburriss.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></body></html>