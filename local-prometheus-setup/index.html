<!DOCTYPE html>
<html><head><!-- META --><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Local Prometheus setup</title><meta name="description" content="Using docker to run a local Prometheus instance for testing."><meta name="author" content="Devon Burriss"><link rel="canonical" href="https://devonburriss.me/local-prometheus-setup/"><meta itemprop="datePublished" content="2021-01-30" id="date"><meta itemprop="dateModified" content="2021-01-30" id="mdate"><meta itemprop="headline" content="Local Prometheus setup - Setting up Prometheus locally with Docker"><meta itemprop="mainEntityOfPage" content="https://devonburriss.me/local-prometheus-setup/"><meta name="headline" content="Local Prometheus setup - Setting up Prometheus locally with Docker"><link rel="icon" type="image/png" href="/img/favicon16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon32.png" sizes="32x32"><meta itemprop="name" content="Local Prometheus setup"><meta itemprop="description" content="Using docker to run a local Prometheus instance for testing."><meta itemprop="image" content="https://devonburriss.me/img/posts/2020/flame-500.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@DevonBurriss"><meta name="twitter:title" content="Local Prometheus setup"><meta name="twitter:description" content="Using docker to run a local Prometheus instance for testing."><meta name="twitter:creator" content="@DevonBurriss"><meta name="twitter:image" content="https://devonburriss.me/img/posts/2020/flame-500.jpg"><meta property="og:title" content="Local Prometheus setup"><meta property="og:type" content="article"><meta property="og:url" content="https://devonburriss.me/local-prometheus-setup/"><meta property="og:image" content="https://devonburriss.me/img/posts/2020/flame-500.jpg"><meta property="og:description" content="Using docker to run a local Prometheus instance for testing."><meta property="og:site_name" content="Devon Burriss&#39; Blog"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/clean-blog.css"><link rel="stylesheet" charset="UTF-8" href="/css/highlight/atom-one-light.css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--></head><body><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Devon Burriss&#39; Blog</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li><a href="/recommended-reading.html">Recommended Reading</a></li><li><a href="/rss.xml"><span class="fa-stack fa-lg"><i class="fa fa-rss fa-stack-1x"></i></span></a></li></ul></div></div></nav><header class="intro-header" style="background-image: url(&#39;/img/backgrounds/dashboard-bg.jpg&#39;)"><div class="container-fluid"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><div class="frame"><h1>Local Prometheus setup</h1><h2 class="subheading">Setting up Prometheus locally with Docker</h2><span class="meta" itemprop="author" itemscope="" itemtype="https://schema.org/Person">Posted by <span itemprop="name">Devon Burriss</span> on January 30, 2021</span><span style="display:contents"><hr><a href="/topics/reliability-observability/" title="Monitoring, metrics, reliability, and failure modes."><span class="label label-default">Reliability &amp; Observability</span></a><a href="/topics/tooling-automation/" title="Build tooling, CI/CD, editors, and developer automation."><span class="label label-default">Tooling &amp; Automation</span></a></span><div></div></div></div></div></div></div></header><article><div class="container-fluid"><div class="row"><div class="col-lg-8"><p>It is useful to have a local Prometheus instance running to test the instrumentation of your application. If you are running the application on your machine, you need to make sure the Prometheus container can talk to the host machine. This is a short post detailing this setup.</p>
<!--more-->
<h2 id="configuration">Configuration</h2>
<p>Firstly, let's create a Prometheus configuration with the needed <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#scrape_config">scrape config</a>.</p>
<pre><code class="language-yaml"># A list of scrape configurations.
scrape_configs:
  # The job name assigned to scraped metrics by default.
  - job_name: 'fennel-metricsdemo'

    # How frequently to scrape targets from this job.
    scrape_interval: 5s
    
    # The HTTP resource path on which to fetch metrics from targets.
    metrics_path: &quot;/api/metrics&quot;

    # List of labeled statically configured targets for this job.
    static_configs:
      # The targets specified by the static config.
      - targets: ['host.docker.internal:7071']
        # Labels assigned to all metrics scraped from the targets.
        labels:
          app: 'demo-app'
</code></pre>
<p>Since we are running this locally, you need to target your local machine. With Docker on Mac I had to target <code>host.docker.internal</code> and my application (an Azure Function) is running locally on port 7071.</p>
<p>Now that we have our configuration, we can use this to start our Docker container, mounting the configuration as a volume.</p>
<pre><code class="language-bash">docker run --rm -it -p 9090:9090 -v /path/to/your/prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus
</code></pre>
<p>Prometheus should now be up and running and if your application is emitting metrics, you can go see them by navigating to http://localhost:9090/graph.</p>
<p><img src="../img/posts/2020/prometheus_sale_count.png" alt="" /></p>
<h2 id="conclusion">Conclusion</h2>
<p>I will be making use of this in an upcoming post I plan to release soon. In my <a href="/prometheus-datadog-agent">next post</a> though I will look at using Datadog instead of a Prometheus server. I hope you find this useful.</p>
<p><span>Photo by <a href="https://unsplash.com/@_ggleee?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Gleb Lukomets</a> on <a href="https://unsplash.com/s/photos/flame?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span></p>
<hr><ul class="pager"><li class="previous"><a href="/meaning-of-meditation/" data-toggle="tooltip" data-placement="top" title="The meaning of meditation">&larr; Previous Post</a></li><li class="next"><a href="/prometheus-datadog-agent/" data-toggle="tooltip" data-placement="top" title="Prometheus Datadog Agent">Next Post &rarr;</a></li></ul></div><div class="col-lg-4 widget-column"><ul class="list-inline text-center"><li><a href="/rss.xml"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i><i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></li><li><a href="/atom.xml"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></li><li><a href="https://twitter.com/DevonBurriss"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href="https://github.com/dburriss"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><span style="display:contents"><h2><i class="glyphicon glyphicon-th-list"></i>  Topics</h2><a class="badge badge-info" href="/topics/software-design/" title="Architecture, design, modeling, and distributed systems."><span class="site-topic">Software Design</span></a><a class="badge badge-info" href="/topics/engineering-practices/" title="How we build, test, and validate software."><span class="site-topic">Engineering Practices</span></a><a class="badge badge-info" href="/topics/platforms-runtime/" title="Runtimes and execution environments (not frameworks)."><span class="site-topic">Platforms &amp; Runtime</span></a><a class="badge badge-info" href="/topics/tooling-automation/" title="Build tooling, CI/CD, editors, and developer automation."><span class="site-topic">Tooling &amp; Automation</span></a><a class="badge badge-info" href="/topics/reliability-observability/" title="Monitoring, metrics, reliability, and failure modes."><span class="site-topic">Reliability &amp; Observability</span></a><a class="badge badge-info" href="/topics/ai-agentic-systems/" title="AI, LLMs, and agentic workflows."><span class="site-topic">AI &amp; Agentic Systems</span></a><a class="badge badge-info" href="/topics/leadership-teams/" title="Human systems around software development."><span class="site-topic">Leadership &amp; Teams</span></a><a class="badge badge-info" href="/topics/notes-reflections/" title="Learning, career, ethics, and life-adjacent thinking."><span class="site-topic">Notes &amp; Reflections</span></a></span></div></div></div><hr></article><span style="display:contents"><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><p class="copyright text-muted">Copyright &#169; <a href="/about.html">Devon Burriss</a> 2026</p></div></div></div></footer><script src="/js/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/clean-blog.min.js"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></span><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45750611-2', 'auto');ga('send', 'pageview');</script><div class="container-fluid"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'devonburriss';(function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://devonburriss.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></body></html>