<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="color-scheme" content="dark light"><title>Honest Arguments</title><meta name="description" content="Part 1 of Designing clear method signatures"><meta name="author" content="Devon Burriss"><meta itemprop="name" content="Honest Arguments"><meta itemprop="description" content="Part 1 of Designing clear method signatures"><meta itemprop="image" content="https://devonburriss.me/img/explore-590.jpg"><link rel="canonical" href="https://devonburriss.me/honest-arguments/"><meta itemprop="datePublished" content="2017-03-10" id="date"><meta itemprop="dateModified" content="2017-03-10" id="mdate"><meta itemprop="headline" content="Honest Arguments - Part 1 of Designing clear method signatures"><meta itemprop="mainEntityOfPage" content="https://devonburriss.me/honest-arguments/"><meta name="headline" content="Honest Arguments - Part 1 of Designing clear method signatures"><link rel="icon" type="image/png" href="/img/favicon16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon32.png" sizes="32x32"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@DevonBurriss"><meta name="twitter:title" content="Honest Arguments"><meta name="twitter:description" content="Part 1 of Designing clear method signatures"><meta name="twitter:creator" content="@DevonBurriss"><meta name="twitter:image" content="https://devonburriss.me/img/explore-590.jpg"><meta property="og:title" content="Honest Arguments"><meta property="og:type" content="article"><meta property="og:url" content="https://devonburriss.me/honest-arguments/"><meta property="og:image" content="https://devonburriss.me/img/explore-590.jpg"><meta property="og:description" content="Part 1 of Designing clear method signatures"><meta property="og:site_name" content="Devon Burriss&#39; Blog"><link rel="stylesheet" href="/css/site.css"><link rel="stylesheet" href="/css/highlight/atom-one-dark.css"><script>(function(){try{var t=localStorage.getItem('theme');if(t==='dark'||t==='light'){document.documentElement.dataset.theme=t;}}catch(e){}})();</script><script src="/js/theme.js" defer="defer"></script></head><body><header class="site-header"><nav class="site-nav"><ul class="site-links"><li><a href="/">Home</a></li><li><a href="/topics/">Topics</a></li><li><a href="/recommended-reading.html">Reading</a></li><li><a href="/about/">About</a></li><li><a href="/rss.xml">RSS</a></li></ul><button type="button" class="theme-toggle" id="theme-toggle" aria-label="Toggle light/dark theme">Theme</button></nav></header><main class="site-main"><span style="display:contents"><header class="page-header"><h1>Honest Arguments</h1><p class="page-subtitle">Part 1 of Designing clear method signatures</p><p class="post-meta">Devon Burriss &#183; Mar 10, 2017</p></header><div class="topic-pills"><a class="topic-pill" href="/topics/engineering-practices/" title="How we build, test, and validate software.">Engineering Practices</a><a class="topic-pill" href="/topics/platforms-runtime/" title="Runtimes and execution environments (not frameworks).">Platforms &amp; Runtime</a></div><hr></span><article class="prose"><p>One of the benefits of statically typed languages is that we can rely on more than the method and parameter names for information on what is expected and what is returned. A well designed method should be about more than naming. Too often we give up on this type safety and expressiveness for the ease of instantiating primitives and <code>string</code>.</p>
<!--more-->
<h1 id="expressively-typed-parameters">Expressively typed parameters</h1>
<p>Consider the following 2 tips for message choice. To be fair I chose less than expressive names to demonstrate that even if a developer doesn't pick the best names (which they should of course try to do and should be fixed), the types of the argument provide all the intent needed. The parameter names could be 'l', 'f', and 'e' and a developer could still infer the usage from the types.</p>
<p><img src="/img/posts/2017/primitive-typed-method.jpg" alt="primitive parameters" />
<em>Figure 1: Using simple type parameters</em></p>
<p><img src="/img/posts/2017/expressively-typed-method.jpg" alt="expressive parameters" />
<em>Figure 2: Using expressive type parameters</em></p>
<p>So how would we represent something like a name as a type instead of a <code>string</code> but still have it play nice with the capture in a client or storage of an instance in a database?
The trick is with the <code>implicit</code> or <code>explicit</code> keywords.</p>
<h2 id="lose-the-primitives-but-play-nice">Lose the primitives (but play nice)</h2>
<p>For types that are always a direct conversion with no chance of failing, use the <code>implicit</code> keyword.</p>
<pre><code class="language-csharp">public class FirstNames
{
    string Value { get; }
    public FirstNames(string value) { Value = value; }

    public static implicit operator string(FirstNames c)
        =&gt; c.Value;
    public static implicit operator FirstNames(string s)
        =&gt; new FirstNames(s);

    public override string ToString() =&gt; Value;
}

//usage
FirstNames name = &quot;Devon Aragorn&quot;;
string nameAsString = name;
</code></pre>
<p>On the other hand when you start adding a bit of behaviour into your class, there is a chance that the conversion can fail. Take for instance an <code>Email</code> type that has some validation of the email address.</p>
<pre><code class="language-csharp">public class Email
{
    private const string regexPattern = @&quot;\A(?:[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)\Z&quot;;
    private string Value { get; }

    public Email(string value)
    {
        if(!Regex.IsMatch(value, regexPattern, RegexOptions.IgnoreCase))
        {
            throw new ArgumentException($&quot;{value} is not a valid email address.&quot;, nameof(value));
        }
        Value = value;
    }

    public static explicit operator string(Email c)
        =&gt; c.Value;
    public static explicit operator Email(string s)
        =&gt; new Email(s);

    public override string ToString() =&gt; Value;
}

//usage
Email email = (Email)&quot;test@test.com&quot;;
string emailAsString = (string)email;
</code></pre>
<p>Here we are using the <code>explicit</code> keyword because the constructor can throw an exception if the string is not a valid email address.</p>
<h3 id="pros">Pros</h3>
<p>Let's list some reasons why you would want to do this with simpler types.</p>
<ul>
<li>Using <strong>expressive types reveal intent</strong> to consumers (other developers and future you)</li>
<li><strong>Finding usage</strong> of particular concepts can be done by type rather than searching text</li>
<li>If doing domain modelling you can now <strong>group behavior and data</strong> to have a descriptive model</li>
<li>Once assigned to an expressive type they <strong>provide type safety</strong></li>
<li>Creation of more <strong>targeted extension methods</strong></li>
</ul>
<h3 id="cons">Cons</h3>
<p>As with most things in programming, #ItDepends. There are some down sides to using types this way...</p>
<ul>
<li><strong>More code</strong> to write and maintain</li>
<li><strong>Serialization</strong> requires a bit more work to do</li>
<li><strong>ORM mapping</strong> could be more complicated</li>
<li>Implicit conversion means you lose some type safety</li>
</ul>
<p>Let me quickly discuss a few of these cons and how they can be mitigated.</p>
<h4 id="more-code">More Code</h4>
<p>Not much to do about the maintainability part. I will say that these are relatively simple and are unlikely to change or have far reaching effects due to dependencies. To address the effort of actually creating these see <a href="/visual-studio-implicit-snippet">Visual Studio Implicit Snippet</a>.</p>
<h4 id="serialization">Serialization</h4>
<p>For some help easily serializing these types check out the <a href="https://github.com/dburriss/HonestTypes">Honest Types repository</a>. That package provides a Json.NET Converter like <code>new SimpleJsonConverter&lt;LastName, string&gt;()</code> that can be supplied to the settings when serializing and deserializing.</p>
<h4 id="orm-mapping">ORM Mapping</h4>
<p>If you are modelling your domain (like with DDD) which is likely the case if you are using types this way, then you shouldn't be using your domain models for persistence. This tends to tie your domain models to the underlying data model and you will find the schema requirements will start leaking into your domain model. So create models for your data layer and map from them to your domain models in the repository.</p>
<h2 id="recommended-reading">Recommended Reading</h2>
<p><a href="http://enterprisecraftsmanship.com/2015/03/07/functional-c-primitive-obsession/">Functional C#: Primitive obsession</a></p>
</article><hr><nav class="pager"><ul class="pager-links"><li><a href="/visual-studio-implicit-snippet/" title="Visual Studio Implicit Snippet">← Previous</a></li><li><a href="/honest-return-types/" title="Honest Return Types">Next →</a></li></ul></nav></main><footer class="site-footer"><p>Copyright &#169; <a href="/about/">Devon Burriss</a> 2026</p></footer><div class="comments"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'devonburriss';(function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://devonburriss.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45750611-2', 'auto');ga('send', 'pageview');</script></body></html>