<!DOCTYPE html>
<html><head><!-- META --><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>F# Scripts</title><meta name="description" content="Start exploring code faster by running F# as a fsx script file"><meta name="author" content="Devon Burriss"><link rel="canonical" href="https://devonburriss.me/fsharp-scripting/"><meta itemprop="datePublished" content="2018-10-17" id="date"><meta itemprop="dateModified" content="2018-10-17" id="mdate"><meta itemprop="headline" content="F# Scripts - Exploring running F# from a fsx script file"><meta itemprop="mainEntityOfPage" content="https://devonburriss.me/fsharp-scripting/"><meta name="headline" content="F# Scripts - Exploring running F# from a fsx script file"><link rel="icon" type="image/png" href="/img/favicon16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon32.png" sizes="32x32"><meta itemprop="name" content="F# Scripts"><meta itemprop="description" content="Start exploring code faster by running F# as a fsx script file"><meta itemprop="image" content="https://devonburriss.me/img/posts/2018/script-500.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@DevonBurriss"><meta name="twitter:title" content="F# Scripts"><meta name="twitter:description" content="Start exploring code faster by running F# as a fsx script file"><meta name="twitter:creator" content="@DevonBurriss"><meta name="twitter:image" content="https://devonburriss.me/img/posts/2018/script-500.jpg"><meta property="og:title" content="F# Scripts"><meta property="og:type" content="article"><meta property="og:url" content="https://devonburriss.me/fsharp-scripting/"><meta property="og:image" content="https://devonburriss.me/img/posts/2018/script-500.jpg"><meta property="og:description" content="Start exploring code faster by running F# as a fsx script file"><meta property="og:site_name" content="Devon Burriss&#39; Blog"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/clean-blog.css"><link rel="stylesheet" charset="UTF-8" href="/css/highlight/atom-one-light.css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--></head><body><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Devon Burriss&#39; Blog</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li><a href="/recommended-reading.html">Recommended Reading</a></li><li><a href="/rss.xml"><span class="fa-stack fa-lg"><i class="fa fa-rss fa-stack-1x"></i></span></a></li></ul></div></div></nav><header class="intro-header" style="background-image: url(&#39;/img/backgrounds/vents-bg.jpg&#39;)"><div class="container-fluid"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><div class="frame"><h1>F# Scripts</h1><h2 class="subheading">Exploring running F# from a fsx script file</h2><span class="meta" itemprop="author" itemscope="" itemtype="https://schema.org/Person">Posted by <span itemprop="name">Devon Burriss</span> on October 17, 2018</span><span style="display:contents"><hr><a href="/tag/f"><span class="label label-default">F#</span></a><a href="/tag/fsx"><span class="label label-default">FSX</span></a></span><div></div></div></div></div></div></div></header><article><div class="container-fluid"><div class="row"><div class="col-lg-8"><p>Using F# scripts is something I only started doing after dabbling in F# for quite a while. This is unfortunate because they are a really fast and easy way of throwing some code together and thus a really good way to learn F#. This post is for anyone getting started with F# scripting.</p>
<!--more-->
<h2 id="installation">Installation</h2>
<p>Check out the <a href="https://docs.microsoft.com/en-us/dotnet/fsharp/get-started/install-fsharp?tabs=windows">documentation for installing F#</a>. The easiest way is to install F# as part of Visual Studio. You may still need to add FSI.exe to your <strong>PATH</strong>.</p>
<ol>
<li><a href="https://fsharp.org/use/windows/">Instructions for Windows</a></li>
<li><a href="https://fsharp.org/use/mac/">Instructions for MacOS</a></li>
<li><a href="https://fsharp.org/use/linux/">Instructions for Linux</a></li>
</ol>
<h2 id="f-interactive">F# Interactive</h2>
<p>FSI allows you to execute F# code in an interactive console. Just type <code>fsi.exe</code> on Windows or <code>fsharpi</code> on Linux/Mac.</p>
<pre><code class="language-fsharp">&gt; let x = 1;;
val x : int = 1
</code></pre>
<blockquote>
<p>Note: Each expression needs to end with <code>;;</code> in the interactive window.</p>
</blockquote>
<p>To get help: <code>#help;;</code><br />
To quit: <code>#quit;;</code></p>
<h2 id="scripting">Scripting</h2>
<p>So entering code directly into fsi is ok for trying simple things out but what about more complex code. That is where <code>.fsx</code> files come in.</p>
<p>Imagine we have a file called <em>print-name.fsx</em> with the following content:</p>
<pre><code class="language-fsharp">let name = &quot;Devon&quot;
printfn &quot;Name: %s&quot; name
</code></pre>
<p>Executing it we would see the following:</p>
<blockquote>
<p>&gt; fsi .\samples\print-name.fsx<br />
&gt; Name: Devon</p>
</blockquote>
<h3 id="including-other-fsx-files">Including other fsx files</h3>
<p>You can load other fsx files into a script. If we have <code>Strings.fsx</code> containing the following code:</p>
<pre><code class="language-fsharp">let toUpper (s:string) = s.ToUpper()
let toLower (s:string) = s.ToLower()
let replace (oldValue:string) (newValue:string) (s:string) = s.Replace(oldValue,newValue)

module StringBuilder =
    open System.Text
    let init() = new StringBuilder()
    let initWith(s:string) = new StringBuilder(s)
    let append (s:string) (sb:StringBuilder) = sb.Append(s)
</code></pre>
<p>We can now use it in our script file like so:</p>
<pre><code class="language-fsharp">#load &quot;Strings.fsx&quot;
open Strings
let name = &quot;Devon&quot; |&gt; StringBuilder.initWith
            |&gt; StringBuilder.append &quot; Burriss&quot;
            |&gt; string |&gt; toUpper
printfn &quot;Name: %s&quot; name
</code></pre>
<p>We use <code>#load &quot;path/to/script.fsx&quot;</code> to make it available and then <code>open NameOfFileWithoutExtension</code> to import it. So each script file is then treated as a <code>module</code>.</p>
<p>Executing it we would see the following:</p>
<blockquote>
<p>&gt; fsi .\samples\print-name.fsx<br />
&gt; Name: DEVON BURRISS</p>
</blockquote>
<h3 id="taking-arguments">Taking Arguments</h3>
<p>It is possible to pass arguments into a script file. They are available in a field <code>fsi.CommandLineArgs</code>. Let's change our script one more time to demonstrate the usage. The arguments come through as an array so we pattern match on the number of elements to decide what to print.</p>
<blockquote>
<p>Note: The first element of the array is always the name of the script the arguments are passed into</p>
</blockquote>
<pre><code class="language-fsharp">#load &quot;Strings.fsx&quot;
open Strings
let stringWithSpace x = x |&gt; string |&gt; (sprintf &quot; %s&quot;)
let name first = first |&gt; toUpper
let nameAndLastName first last = first |&gt; StringBuilder.initWith |&gt; StringBuilder.append last |&gt; stringWithSpace |&gt; toUpper
let nameAndLastNameWithOccupation first last occ = 
    first |&gt; StringBuilder.initWith 
    |&gt; StringBuilder.append &quot; &quot; 
    |&gt; StringBuilder.append last 
    |&gt; StringBuilder.append (sprintf &quot; (%s)&quot; occ)
    |&gt; string |&gt; toUpper

match fsi.CommandLineArgs with
| [|scriptName;|] -&gt; failwith (sprintf &quot;At least a name required for %s&quot; scriptName)
| [|_;firstName|] -&gt; name firstName |&gt; printfn &quot;Name: %s&quot;
| [|_;firstName; lastName|] -&gt; nameAndLastName firstName lastName |&gt; printfn &quot;Name: %s&quot;
| [|_;firstName; lastName; occ|] -&gt; nameAndLastNameWithOccupation firstName lastName occ |&gt; printfn &quot;Name: %s&quot;
| _ -&gt; failwith (sprintf &quot;Too many arguments %A&quot; (fsi.CommandLineArgs |&gt; Array.tail))
</code></pre>
<p>Executing it we would see the following:</p>
<blockquote>
<p>&gt; fsi .\samples\print-name.fsx devon burriss developer<br />
&gt; Name: DEVON BURRISS (DEVELOPER)</p>
</blockquote>
<p>You could of course also access the arguments as a zero based array <code>fsi.CommandLineArgs.[0]</code> or loop through them.</p>
<h3 id="nuget-packages">Nuget packages</h3>
<blockquote>
<p>Edit: Since .NET 5 it is possible to reference nuget packages directly in your fsx script.</p>
</blockquote>
<p>You can reference nuget packages in your script files by using the <code>#r nuget:Package.Name</code> syntax.</p>
<p>As an example:</p>
<pre><code class="language-fsharp">#r &quot;nuget: FSharp.Data&quot;

open FSharp.Data

let jVal = JsonValue.Parse &quot;&quot;&quot;{ &quot;lang&quot;: &quot;fsharp&quot; }&quot;&quot;&quot;
</code></pre>
<h3 id="referencing-dlls">Referencing DLLs</h3>
<p>You can reference DLLs using <code>#r &quot;path/to/file.dll&quot;</code>. If you want to pull down DLLs from Nuget, check out <a href="/up-and-running-with-paket">my article on using Paket dependency manager</a>.</p>
<h2 id="resources">Resources</h2>
<ol>
<li><a href="https://docs.microsoft.com/en-us/dotnet/fsharp/tutorials/fsharp-interactive/">FSI Documentation</a></li>
<li><a href="http://brandewinder.com/2016/02/06/10-fsharp-scripting-tips/">10 Tips for Productive F# Scripting</a></li>
</ol>
<h2 id="credits">Credits</h2>
<ol>
<li>Social Image by <a href="https://unsplash.com/@0628fromchina">yifei chen</a></li>
</ol>
<hr><ul class="pager"><li class="previous"><a href="/up-and-running-with-paket/" data-toggle="tooltip" data-placement="top" title="Up and running with PAKET">&larr; Previous Post</a></li><li class="next"><a href="/how-to-fsharp-pt-1/" data-toggle="tooltip" data-placement="top" title="How to F# - Part 1">Next Post &rarr;</a></li></ul></div><div class="col-lg-4 widget-column"><ul class="list-inline text-center"><li><a href="/rss.xml"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i><i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></li><li><a href="/atom.xml"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></li><li><a href="https://twitter.com/DevonBurriss"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href="https://github.com/dburriss"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><span style="display:contents"><h2><i class="glyphicon glyphicon-folder-open"></i>  Categories</h2><a class="badge badge-info" href="/category/agile">Agile</a><a class="badge badge-info" href="/category/devops">DevOps</a><a class="badge badge-info" href="/category/leadership">Leadership</a><a class="badge badge-info" href="/category/life">Life</a><a class="badge badge-info" href="/category/project-management">Project Management</a><a class="badge badge-info" href="/category/software-development">Software Development</a><a class="badge badge-info" href="/category/tools">Tools</a></span><span style="display:contents"><h2><i class="glyphicon glyphicon-tags"></i>  Tags</h2><div class="well"><a class="badge badge-info" style="font-size: 120%" href="/tag/net/"><span class="site-tag">.NET</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/net-core/"><span class="site-tag">.NET Core</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/api-design/"><span class="site-tag">API Design</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/aspnet-5/"><span class="site-tag">ASP.NET 5</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/atdd/"><span class="site-tag">ATDD</span></a><a class="badge badge-info" style="font-size: 112%" href="/tag/agile/"><span class="site-tag">Agile</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/appveyor/"><span class="site-tag">AppVeyor</span></a><a class="badge badge-info" style="font-size: 100%" href="/tag/architecture/"><span class="site-tag">Architecture</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/azure/"><span class="site-tag">Azure</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/bdd/"><span class="site-tag">BDD</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/c/"><span class="site-tag">C#</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/c4/"><span class="site-tag">C4</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/ci/"><span class="site-tag">CI</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/cake/"><span class="site-tag">Cake</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/canopy/"><span class="site-tag">Canopy</span></a><a class="badge badge-info" style="font-size: 108%" href="/tag/clean-code/"><span class="site-tag">Clean Code</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/client-generated-id/"><span class="site-tag">Client generated ID</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/collections/"><span class="site-tag">Collections</span></a><a class="badge badge-info" style="font-size: 100%" href="/tag/ddd/"><span class="site-tag">DDD</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/dnx/"><span class="site-tag">DNX</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/datadog/"><span class="site-tag">Datadog</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/design-patterns/"><span class="site-tag">Design Patterns</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/diagrams/"><span class="site-tag">Diagrams</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/distributed-systems/"><span class="site-tag">Distributed Systems</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/docker/"><span class="site-tag">Docker</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/extreme-programming/"><span class="site-tag">Extreme Programming</span></a><a class="badge badge-info" style="font-size: 176%" href="/tag/f/"><span class="site-tag">F#</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/fsx/"><span class="site-tag">FSX</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/fennel/"><span class="site-tag">Fennel</span></a><a class="badge badge-info" style="font-size: 100%" href="/tag/fsadvent/"><span class="site-tag">FsAdvent</span></a><a class="badge badge-info" style="font-size: 164%" href="/tag/functional/"><span class="site-tag">Functional</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/functional-modeling/"><span class="site-tag">Functional Modeling</span></a><a class="badge badge-info" style="font-size: 116%" href="/tag/general/"><span class="site-tag">General</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/git/"><span class="site-tag">Git</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/github-pages/"><span class="site-tag">Github Pages</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/hyper-v/"><span class="site-tag">Hyper V</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/idempotent/"><span class="site-tag">Idempotent</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/java/"><span class="site-tag">Java</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/learning-c/"><span class="site-tag">Learning c#</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/life/"><span class="site-tag">Life</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/mvc-6/"><span class="site-tag">MVC 6</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/maven/"><span class="site-tag">Maven</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/meditation/"><span class="site-tag">Meditation</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/messaging/"><span class="site-tag">Messaging</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/mindfulness/"><span class="site-tag">Mindfulness</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/modeling/"><span class="site-tag">Modeling</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/morality/"><span class="site-tag">Morality</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/nuget/"><span class="site-tag">Nuget</span></a><a class="badge badge-info" style="font-size: 116%" href="/tag/oop/"><span class="site-tag">OOP</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/osx/"><span class="site-tag">OSX</span></a><a class="badge badge-info" style="font-size: 100%" href="/tag/observability/"><span class="site-tag">Observability</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/paket/"><span class="site-tag">Paket</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/pascal/"><span class="site-tag">Pascal</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/powershell/"><span class="site-tag">Powershell</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/pretzel/"><span class="site-tag">Pretzel</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/productivity/"><span class="site-tag">Productivity</span></a><a class="badge badge-info" style="font-size: 116%" href="/tag/programming/"><span class="site-tag">Programming</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/prometheus/"><span class="site-tag">Prometheus</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/reliability/"><span class="site-tag">Reliability</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/solid/"><span class="site-tag">SOLID</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/science/"><span class="site-tag">Science</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/selenium/"><span class="site-tag">Selenium</span></a><a class="badge badge-info" style="font-size: 108%" href="/tag/tdd/"><span class="site-tag">TDD</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/team-lead/"><span class="site-tag">Team Lead</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/temporal-modeling/"><span class="site-tag">Temporal Modeling</span></a><a class="badge badge-info" style="font-size: 112%" href="/tag/testing/"><span class="site-tag">Testing</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/tutorial/"><span class="site-tag">Tutorial</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/ubuntu/"><span class="site-tag">Ubuntu</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/unit-testing/"><span class="site-tag">Unit Testing</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/vs-code/"><span class="site-tag">VS Code</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/visual-studio/"><span class="site-tag">Visual Studio</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/visual-studio-online/"><span class="site-tag">Visual Studio Online</span></a></div></span></div></div></div><hr></article><span style="display:contents"><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><p class="copyright text-muted">Copyright &#169; <a href="/about.html">Devon Burriss</a> 2025</p></div></div></div></footer><script src="/js/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/clean-blog.min.js"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></span><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45750611-2', 'auto');ga('send', 'pageview');</script><div class="container-fluid"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'devonburriss';(function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://devonburriss.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></body></html>