<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="color-scheme" content="dark light"><title>F# Scripts</title><meta name="description" content="Start exploring code faster by running F# as a fsx script file"><meta name="author" content="Devon Burriss"><meta itemprop="name" content="F# Scripts"><meta itemprop="description" content="Start exploring code faster by running F# as a fsx script file"><meta itemprop="image" content="https://devonburriss.me/img/posts/2018/script-500.jpg"><link rel="canonical" href="https://devonburriss.me/fsharp-scripting/"><meta itemprop="datePublished" content="2018-10-17" id="date"><meta itemprop="dateModified" content="2018-10-17" id="mdate"><meta itemprop="headline" content="F# Scripts - Exploring running F# from a fsx script file"><meta itemprop="mainEntityOfPage" content="https://devonburriss.me/fsharp-scripting/"><meta name="headline" content="F# Scripts - Exploring running F# from a fsx script file"><link rel="icon" type="image/png" href="/img/favicon16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon32.png" sizes="32x32"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@DevonBurriss"><meta name="twitter:title" content="F# Scripts"><meta name="twitter:description" content="Start exploring code faster by running F# as a fsx script file"><meta name="twitter:creator" content="@DevonBurriss"><meta name="twitter:image" content="https://devonburriss.me/img/posts/2018/script-500.jpg"><meta property="og:title" content="F# Scripts"><meta property="og:type" content="article"><meta property="og:url" content="https://devonburriss.me/fsharp-scripting/"><meta property="og:image" content="https://devonburriss.me/img/posts/2018/script-500.jpg"><meta property="og:description" content="Start exploring code faster by running F# as a fsx script file"><meta property="og:site_name" content="Devon Burriss&#39; Blog"><link rel="stylesheet" href="/css/site.css"><link rel="stylesheet" href="/css/highlight/atom-one-dark.css"><script>(function(){try{var t=localStorage.getItem('theme');if(t==='dark'||t==='light'){document.documentElement.dataset.theme=t;}}catch(e){}})();</script><script src="/js/theme.js" defer="defer"></script></head><body><header class="site-header"><nav class="site-nav"><ul class="site-links"><li><a href="/">Home</a></li><li><a href="/topics/">Topics</a></li><li><a href="/recommended-reading.html">Reading</a></li><li><a href="/about/">About</a></li><li><a href="/rss.xml">RSS</a></li></ul><button type="button" class="theme-toggle" id="theme-toggle" aria-label="Toggle light/dark theme">Theme</button></nav></header><main class="site-main"><span style="display:contents"><header class="page-header"><h1>F# Scripts</h1><p class="page-subtitle">Exploring running F# from a fsx script file</p><p class="post-meta">Devon Burriss &#183; Oct 17, 2018</p></header><div class="topic-pills"><a class="topic-pill" href="/topics/platforms-runtime/" title="Runtimes and execution environments (not frameworks).">Platforms &amp; Runtime</a></div><hr></span><article class="prose"><p>Using F# scripts is something I only started doing after dabbling in F# for quite a while. This is unfortunate because they are a really fast and easy way of throwing some code together and thus a really good way to learn F#. This post is for anyone getting started with F# scripting.</p>
<!--more-->
<h2 id="installation">Installation</h2>
<p>Check out the <a href="https://docs.microsoft.com/en-us/dotnet/fsharp/get-started/install-fsharp?tabs=windows">documentation for installing F#</a>. The easiest way is to install F# as part of Visual Studio. You may still need to add FSI.exe to your <strong>PATH</strong>.</p>
<ol>
<li><a href="https://fsharp.org/use/windows/">Instructions for Windows</a></li>
<li><a href="https://fsharp.org/use/mac/">Instructions for MacOS</a></li>
<li><a href="https://fsharp.org/use/linux/">Instructions for Linux</a></li>
</ol>
<h2 id="f-interactive">F# Interactive</h2>
<p>FSI allows you to execute F# code in an interactive console. Just type <code>fsi.exe</code> on Windows or <code>fsharpi</code> on Linux/Mac.</p>
<pre><code class="language-fsharp">&gt; let x = 1;;
val x : int = 1
</code></pre>
<blockquote>
<p>Note: Each expression needs to end with <code>;;</code> in the interactive window.</p>
</blockquote>
<p>To get help: <code>#help;;</code><br />
To quit: <code>#quit;;</code></p>
<h2 id="scripting">Scripting</h2>
<p>So entering code directly into fsi is ok for trying simple things out but what about more complex code. That is where <code>.fsx</code> files come in.</p>
<p>Imagine we have a file called <em>print-name.fsx</em> with the following content:</p>
<pre><code class="language-fsharp">let name = &quot;Devon&quot;
printfn &quot;Name: %s&quot; name
</code></pre>
<p>Executing it we would see the following:</p>
<blockquote>
<p>&gt; fsi .\samples\print-name.fsx<br />
&gt; Name: Devon</p>
</blockquote>
<h3 id="including-other-fsx-files">Including other fsx files</h3>
<p>You can load other fsx files into a script. If we have <code>Strings.fsx</code> containing the following code:</p>
<pre><code class="language-fsharp">let toUpper (s:string) = s.ToUpper()
let toLower (s:string) = s.ToLower()
let replace (oldValue:string) (newValue:string) (s:string) = s.Replace(oldValue,newValue)

module StringBuilder =
    open System.Text
    let init() = new StringBuilder()
    let initWith(s:string) = new StringBuilder(s)
    let append (s:string) (sb:StringBuilder) = sb.Append(s)
</code></pre>
<p>We can now use it in our script file like so:</p>
<pre><code class="language-fsharp">#load &quot;Strings.fsx&quot;
open Strings
let name = &quot;Devon&quot; |&gt; StringBuilder.initWith
            |&gt; StringBuilder.append &quot; Burriss&quot;
            |&gt; string |&gt; toUpper
printfn &quot;Name: %s&quot; name
</code></pre>
<p>We use <code>#load &quot;path/to/script.fsx&quot;</code> to make it available and then <code>open NameOfFileWithoutExtension</code> to import it. So each script file is then treated as a <code>module</code>.</p>
<p>Executing it we would see the following:</p>
<blockquote>
<p>&gt; fsi .\samples\print-name.fsx<br />
&gt; Name: DEVON BURRISS</p>
</blockquote>
<h3 id="taking-arguments">Taking Arguments</h3>
<p>It is possible to pass arguments into a script file. They are available in a field <code>fsi.CommandLineArgs</code>. Let's change our script one more time to demonstrate the usage. The arguments come through as an array so we pattern match on the number of elements to decide what to print.</p>
<blockquote>
<p>Note: The first element of the array is always the name of the script the arguments are passed into</p>
</blockquote>
<pre><code class="language-fsharp">#load &quot;Strings.fsx&quot;
open Strings
let stringWithSpace x = x |&gt; string |&gt; (sprintf &quot; %s&quot;)
let name first = first |&gt; toUpper
let nameAndLastName first last = first |&gt; StringBuilder.initWith |&gt; StringBuilder.append last |&gt; stringWithSpace |&gt; toUpper
let nameAndLastNameWithOccupation first last occ = 
    first |&gt; StringBuilder.initWith 
    |&gt; StringBuilder.append &quot; &quot; 
    |&gt; StringBuilder.append last 
    |&gt; StringBuilder.append (sprintf &quot; (%s)&quot; occ)
    |&gt; string |&gt; toUpper

match fsi.CommandLineArgs with
| [|scriptName;|] -&gt; failwith (sprintf &quot;At least a name required for %s&quot; scriptName)
| [|_;firstName|] -&gt; name firstName |&gt; printfn &quot;Name: %s&quot;
| [|_;firstName; lastName|] -&gt; nameAndLastName firstName lastName |&gt; printfn &quot;Name: %s&quot;
| [|_;firstName; lastName; occ|] -&gt; nameAndLastNameWithOccupation firstName lastName occ |&gt; printfn &quot;Name: %s&quot;
| _ -&gt; failwith (sprintf &quot;Too many arguments %A&quot; (fsi.CommandLineArgs |&gt; Array.tail))
</code></pre>
<p>Executing it we would see the following:</p>
<blockquote>
<p>&gt; fsi .\samples\print-name.fsx devon burriss developer<br />
&gt; Name: DEVON BURRISS (DEVELOPER)</p>
</blockquote>
<p>You could of course also access the arguments as a zero based array <code>fsi.CommandLineArgs.[0]</code> or loop through them.</p>
<h3 id="nuget-packages">Nuget packages</h3>
<blockquote>
<p>Edit: Since .NET 5 it is possible to reference nuget packages directly in your fsx script.</p>
</blockquote>
<p>You can reference nuget packages in your script files by using the <code>#r nuget:Package.Name</code> syntax.</p>
<p>As an example:</p>
<pre><code class="language-fsharp">#r &quot;nuget: FSharp.Data&quot;

open FSharp.Data

let jVal = JsonValue.Parse &quot;&quot;&quot;{ &quot;lang&quot;: &quot;fsharp&quot; }&quot;&quot;&quot;
</code></pre>
<h3 id="referencing-dlls">Referencing DLLs</h3>
<p>You can reference DLLs using <code>#r &quot;path/to/file.dll&quot;</code>. If you want to pull down DLLs from Nuget, check out <a href="/up-and-running-with-paket">my article on using Paket dependency manager</a>.</p>
<h2 id="resources">Resources</h2>
<ol>
<li><a href="https://docs.microsoft.com/en-us/dotnet/fsharp/tutorials/fsharp-interactive/">FSI Documentation</a></li>
<li><a href="http://brandewinder.com/2016/02/06/10-fsharp-scripting-tips/">10 Tips for Productive F# Scripting</a></li>
</ol>
<h2 id="credits">Credits</h2>
<ol>
<li>Social Image by <a href="https://unsplash.com/@0628fromchina">yifei chen</a></li>
</ol>
</article><hr><nav class="pager"><ul class="pager-links"><li><a href="/up-and-running-with-paket/" title="Up and running with PAKET">← Previous</a></li><li><a href="/how-to-fsharp-pt-1/" title="How to F# - Part 1">Next →</a></li></ul></nav></main><footer class="site-footer"><p>Copyright &#169; <a href="/about/">Devon Burriss</a> 2026</p></footer><div class="comments"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'devonburriss';(function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://devonburriss.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45750611-2', 'auto');ga('send', 'pageview');</script></body></html>