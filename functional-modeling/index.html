<!DOCTYPE html>
<html><head><!-- META --><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Functional modeling</title><meta name="description" content="As OOP developers it is often far too easy for us to try create a model that captures every state. This is almost always a poor abstraction. What if instead of trying to model every possible state at rest we modeled the change of state over time? This article explores what that might look like."><meta name="author" content="Devon Burriss"><link rel="canonical" href="https://devonburriss.me/functional-modeling/"><meta itemprop="datePublished" content="2018-10-13" id="date"><meta itemprop="dateModified" content="2018-10-13" id="mdate"><meta itemprop="headline" content="Functional modeling - The benefits of focusing on function rather than state"><meta itemprop="mainEntityOfPage" content="https://devonburriss.me/functional-modeling/"><meta name="headline" content="Functional modeling - The benefits of focusing on function rather than state"><link rel="icon" type="image/png" href="/img/favicon16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon32.png" sizes="32x32"><meta itemprop="name" content="Functional modeling"><meta itemprop="description" content="As OOP developers it is often far too easy for us to try create a model that captures every state. This is almost always a poor abstraction. What if instead of trying to model every possible state at rest we modeled the change of state over time? This article explores what that might look like."><meta itemprop="image" content="https://devonburriss.me/img/posts/2018/functional-model-500.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@DevonBurriss"><meta name="twitter:title" content="Functional modeling"><meta name="twitter:description" content="As OOP developers it is often far too easy for us to try create a model that captures every state. This is almost always a poor abstraction. What if instead of trying to model every possible state at rest we modeled the change of state over time? This article explores what that might look like."><meta name="twitter:creator" content="@DevonBurriss"><meta name="twitter:image" content="https://devonburriss.me/img/posts/2018/functional-model-500.jpg"><meta property="og:title" content="Functional modeling"><meta property="og:type" content="article"><meta property="og:url" content="https://devonburriss.me/functional-modeling/"><meta property="og:image" content="https://devonburriss.me/img/posts/2018/functional-model-500.jpg"><meta property="og:description" content="As OOP developers it is often far too easy for us to try create a model that captures every state. This is almost always a poor abstraction. What if instead of trying to model every possible state at rest we modeled the change of state over time? This article explores what that might look like."><meta property="og:site_name" content="Devon Burriss&#39; Blog"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/clean-blog.css"><link rel="stylesheet" charset="UTF-8" href="/css/highlight/atom-one-light.css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--></head><body><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Devon Burriss&#39; Blog</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li><a href="/recommended-reading.html">Recommended Reading</a></li><li><a href="/rss.xml"><span class="fa-stack fa-lg"><i class="fa fa-rss fa-stack-1x"></i></span></a></li></ul></div></div></nav><header class="intro-header" style="background-image: url(&#39;/img/backgrounds/bulb-bg.jpg&#39;)"><div class="container-fluid"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><div class="frame"><h1>Functional modeling</h1><h2 class="subheading">The benefits of focusing on function rather than state</h2><span class="meta" itemprop="author" itemscope="" itemtype="https://schema.org/Person">Posted by <span itemprop="name">Devon Burriss</span> on October 13, 2018</span><span style="display:contents"><hr><a href="/tag/ddd"><span class="label label-default">DDD</span></a><a href="/tag/oop"><span class="label label-default">OOP</span></a><a href="/tag/functional-modeling"><span class="label label-default">Functional Modeling</span></a><a href="/tag/architecture"><span class="label label-default">Architecture</span></a><a href="/tag/modeling"><span class="label label-default">Modeling</span></a><a href="/tag/temporal-modeling"><span class="label label-default">Temporal Modeling</span></a></span><div></div></div></div></div></div></div></header><article><div class="container-fluid"><div class="row"><div class="col-lg-8"><p>In my <a href="/functional-structural-impedance-mismatch">previous post</a> I introduced the idea of a structural model in the code that closely matches what a use-case should do functionally. Just as an ubiquitous language helps us tie concepts in our code, so a functional model helps us capture the functioning of a use-case. In this post I will go into this idea in a little more detail, giving some tips on how to get started.</p>
<!--more-->
<blockquote>
<p>I am not explicitly talking about functional programming in this article although any familiar with it will see it's influences. Even if you do not embrace FP, the concepts from it that I mention here can be applied to the benefit of your codebase.</p>
</blockquote>
<p>As an example we are looking at a real life project where we are allocating monetary amounts to sales or purchases based on agreements we have with suppliers.
Let's start with a deeper look at the example that was used in the previous post:</p>
<p><img src="/img/posts/2018/functional-structure.jpg" alt="Allocation functional structure" /></p>
<p>This was a very simplified view of the components involved for calculating the amounts to be allocated to an agreement due to sales or inbound orders. It also still shows the structural components involved. As an exercise I mapped out the calls that are made while completing a use-case. This style is borrowed from Simon Brown's <a href="https://c4model.com">C4 Model</a> but with a focus on function rather than structure.</p>
<p><img src="/img/posts/2018/functional-model.jpg" alt="Allocation functional structure" /></p>
<p>And here is the top the entry point for this use-case.</p>
<pre><code class="language-csharp">return await TryGetAgreement(agreementId)
            .Bind(agreement =&gt; 
                    _agreementSupportedValidator.IsSupported(agreement).ToAsync())
            .Bind(supportedAgreement =&gt; 
                    TryCreateAgreementWithHistory(supportedAgreement).ToAsync())
            .Bind(agreementWithHistory =&gt; 
                    AllocationPathfinder(agreementWithHistory).ToAsync())
            .Map(allocationResult =&gt; 
                    AllocationsFilter.Filter(allocationResult))
            .Bind(newAllocationResult =&gt; 
                    TryStoreAllocations(newAllocationResult).ToAsync())
            .Try();
</code></pre>
<p>Although I am the first to admit that this style is not too pretty in C#, once you get used to the <a href="https://github.com/louthy/language-ext">Functional Language Extensions</a> like <code>Bind</code>, <code>Map</code>, and <code>Try</code>, it really reads like what it does at this level of abstraction.</p>
<p>So why would we want to write code like this?</p>
<h2 id="high-level-description-of-process">High level description of process</h2>
<p>When exploring a codebase it is always nice to find the entry point to a feature that describes what happens at a single abstraction level. Too often each step is wrapped in some infected factory or manager that conveys very little intent and quickly become a class quagmire.</p>
<h2 id="maps-well-to-event-storming">Maps well to Event Storming</h2>
<p><a href="https://www.eventstorming.com/">Event Storming</a> is becoming increasingly more popular as a means of learning a domain. By it's very nature Event Storming is a time based rather than a state based model and it can be quite difficult</p>
<p><img src="/img/posts/2018/es-legend.jpg" alt="Event Storming legend" /></p>
<h2 id="focus-on-doing">Focus on doing</h2>
<p>Following on from the previous point but true of every level of the codebase, bringing the functional process forward into plain view is simpler when focusing on what is being done, rather than on the doer. we now move from modeling stateful doers to modeling the state between transformations over time. This is way more inline with how the business thinks in terms of getting work done.</p>
<h2 id="testability-unit-tests">Testability (unit tests)</h2>
<p>If you are able to constrain external IO to the beginning and end of your flows you will have simple input/output functions in between. This sort of code is a lot more testable than those that have many dependencies. You can now concentrate on just testing the output from a certain input without worrying about injecting mocked dependencies.</p>
<h2 id="composability">Composability</h2>
<p>Often in business we have branching flows. Too often this results in bad abstractions that try to handle every branch, even those not yet added by the business. A far more maintainable way to handle these is to reuse that which is common and compose it with specific implementations when things branch. This usually results in cleaner code that is far more future proof than using inheritance.</p>
<h2 id="conclusion">Conclusion</h2>
<p>In this post we went into a little more detail of what code may look like if we started modeling the flow of events through time even within small the use-cases. We looked briefly at what this could look like and reasons it might be worth trying. The keys to implementing this well is to;</p>
<ol>
<li>Chain steps at a single abstraction level that make sense, allowing developers to dive only to the depth needed to understand what is needed</li>
<li>Instead of trying to come up with an abstraction that captures every state, model the states between transitions</li>
<li>Capture the domain language in both the states and the functions that transition from state to state</li>
<li>Push dependencies to the outside to increase testability and how easy it is to reason about the system</li>
</ol>
<p>If you are interested in really drilling into this and learn functional programming a highly recommend <a href="https://pragprog.com/book/swdddf/domain-modeling-made-functional">Scott Wlaschin's Domain Modeling made Functional</a>.</p>
<p>What do you think? If you have any ideas please leave a comment or reach out on Twitter <a href="https://twitter.com/DevonBurriss">@DevonBurriss</a>. You also may be interested in my <a href="/functional-structural-impedance-mismatch">previous article on the differences between structural and functional modeling</a> and my <a href="/managing-code-complexity">tips for managing code complexity</a>.</p>
<h2 id="resources">Resources</h2>
<ol>
<li><a href="https://en.wikipedia.org/wiki/Function_model">Function model</a></li>
</ol>
<hr><ul class="pager"><li class="previous"><a href="/functional-structural-impedance-mismatch/" data-toggle="tooltip" data-placement="top" title="The functional-structural impedance mismatch">&larr; Previous Post</a></li><li class="next"><a href="/up-and-running-with-paket/" data-toggle="tooltip" data-placement="top" title="Up and running with PAKET">Next Post &rarr;</a></li></ul></div><div class="col-lg-4 widget-column"><ul class="list-inline text-center"><li><a href="/rss.xml"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i><i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></li><li><a href="/atom.xml"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></li><li><a href="https://twitter.com/DevonBurriss"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href="https://github.com/dburriss"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><span style="display:contents"><h2><i class="glyphicon glyphicon-folder-open"></i>  Categories</h2><a class="badge badge-info" href="/category/agile">Agile</a><a class="badge badge-info" href="/category/devops">DevOps</a><a class="badge badge-info" href="/category/leadership">Leadership</a><a class="badge badge-info" href="/category/life">Life</a><a class="badge badge-info" href="/category/project-management">Project Management</a><a class="badge badge-info" href="/category/software-development">Software Development</a><a class="badge badge-info" href="/category/tools">Tools</a></span><span style="display:contents"><h2><i class="glyphicon glyphicon-tags"></i>  Tags</h2><div class="well"><a class="badge badge-info" style="font-size: 120%" href="/tag/net/"><span class="site-tag">.NET</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/net-core/"><span class="site-tag">.NET Core</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/ai/"><span class="site-tag">AI</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/api-design/"><span class="site-tag">API Design</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/aspnet-5/"><span class="site-tag">ASP.NET 5</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/atdd/"><span class="site-tag">ATDD</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/agentic/"><span class="site-tag">Agentic</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/agents/"><span class="site-tag">Agents</span></a><a class="badge badge-info" style="font-size: 112%" href="/tag/agile/"><span class="site-tag">Agile</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/appveyor/"><span class="site-tag">AppVeyor</span></a><a class="badge badge-info" style="font-size: 100%" href="/tag/architecture/"><span class="site-tag">Architecture</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/automation/"><span class="site-tag">Automation</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/azure/"><span class="site-tag">Azure</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/bdd/"><span class="site-tag">BDD</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/c/"><span class="site-tag">C#</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/c4/"><span class="site-tag">C4</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/ci/"><span class="site-tag">CI</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/cake/"><span class="site-tag">Cake</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/canopy/"><span class="site-tag">Canopy</span></a><a class="badge badge-info" style="font-size: 108%" href="/tag/clean-code/"><span class="site-tag">Clean Code</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/client-generated-id/"><span class="site-tag">Client generated ID</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/collections/"><span class="site-tag">Collections</span></a><a class="badge badge-info" style="font-size: 100%" href="/tag/ddd/"><span class="site-tag">DDD</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/dnx/"><span class="site-tag">DNX</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/datadog/"><span class="site-tag">Datadog</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/design-patterns/"><span class="site-tag">Design Patterns</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/diagrams/"><span class="site-tag">Diagrams</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/distributed-systems/"><span class="site-tag">Distributed Systems</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/docker/"><span class="site-tag">Docker</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/extreme-programming/"><span class="site-tag">Extreme Programming</span></a><a class="badge badge-info" style="font-size: 176%" href="/tag/f/"><span class="site-tag">F#</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/fsx/"><span class="site-tag">FSX</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/fennel/"><span class="site-tag">Fennel</span></a><a class="badge badge-info" style="font-size: 100%" href="/tag/fsadvent/"><span class="site-tag">FsAdvent</span></a><a class="badge badge-info" style="font-size: 164%" href="/tag/functional/"><span class="site-tag">Functional</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/functional-modeling/"><span class="site-tag">Functional Modeling</span></a><a class="badge badge-info" style="font-size: 116%" href="/tag/general/"><span class="site-tag">General</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/git/"><span class="site-tag">Git</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/github-pages/"><span class="site-tag">Github Pages</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/hyper-v/"><span class="site-tag">Hyper V</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/idempotent/"><span class="site-tag">Idempotent</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/java/"><span class="site-tag">Java</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/learning-c/"><span class="site-tag">Learning c#</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/life/"><span class="site-tag">Life</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/mvc-6/"><span class="site-tag">MVC 6</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/maven/"><span class="site-tag">Maven</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/meditation/"><span class="site-tag">Meditation</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/messaging/"><span class="site-tag">Messaging</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/mindfulness/"><span class="site-tag">Mindfulness</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/modeling/"><span class="site-tag">Modeling</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/morality/"><span class="site-tag">Morality</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/nuget/"><span class="site-tag">Nuget</span></a><a class="badge badge-info" style="font-size: 116%" href="/tag/oop/"><span class="site-tag">OOP</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/osx/"><span class="site-tag">OSX</span></a><a class="badge badge-info" style="font-size: 100%" href="/tag/observability/"><span class="site-tag">Observability</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/opencode/"><span class="site-tag">OpenCode</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/paket/"><span class="site-tag">Paket</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/pascal/"><span class="site-tag">Pascal</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/powershell/"><span class="site-tag">Powershell</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/pretzel/"><span class="site-tag">Pretzel</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/productivity/"><span class="site-tag">Productivity</span></a><a class="badge badge-info" style="font-size: 116%" href="/tag/programming/"><span class="site-tag">Programming</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/prometheus/"><span class="site-tag">Prometheus</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/reliability/"><span class="site-tag">Reliability</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/solid/"><span class="site-tag">SOLID</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/science/"><span class="site-tag">Science</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/selenium/"><span class="site-tag">Selenium</span></a><a class="badge badge-info" style="font-size: 108%" href="/tag/tdd/"><span class="site-tag">TDD</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/team-lead/"><span class="site-tag">Team Lead</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/temporal-modeling/"><span class="site-tag">Temporal Modeling</span></a><a class="badge badge-info" style="font-size: 112%" href="/tag/testing/"><span class="site-tag">Testing</span></a><a class="badge badge-info" style="font-size: 92%" href="/tag/tutorial/"><span class="site-tag">Tutorial</span></a><a class="badge badge-info" style="font-size: 88%" href="/tag/ubuntu/"><span class="site-tag">Ubuntu</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/unit-testing/"><span class="site-tag">Unit Testing</span></a><a class="badge badge-info" style="font-size: 96%" href="/tag/vs-code/"><span class="site-tag">VS Code</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/visual-studio/"><span class="site-tag">Visual Studio</span></a><a class="badge badge-info" style="font-size: 84%" href="/tag/visual-studio-online/"><span class="site-tag">Visual Studio Online</span></a></div></span></div></div></div><hr></article><span style="display:contents"><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><p class="copyright text-muted">Copyright &#169; <a href="/about.html">Devon Burriss</a> 2025</p></div></div></div></footer><script src="/js/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/clean-blog.min.js"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></span><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45750611-2', 'auto');ga('send', 'pageview');</script><div class="container-fluid"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'devonburriss';(function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://devonburriss.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></body></html>