<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="color-scheme" content="dark light"><title>Converting between F# and C# types</title><meta name="description" content="In this post we look at converting between F# collections like Seq, List, Array and common C# collections and interfaces."><meta name="author" content="Devon Burriss"><meta itemprop="name" content="Converting between F# and C# types"><meta itemprop="description" content="In this post we look at converting between F# collections like Seq, List, Array and common C# collections and interfaces."><meta itemprop="image" content="https://devonburriss.me/img/posts/2020/fsharp512sharp.png"><link rel="canonical" href="https://devonburriss.me/converting-fsharp-csharp/"><meta itemprop="datePublished" content="2020-05-05" id="date"><meta itemprop="dateModified" content="2020-05-05" id="mdate"><meta itemprop="headline" content="Converting between F# and C# types - Breaking down conversions between C# and F# collections and functions"><meta itemprop="mainEntityOfPage" content="https://devonburriss.me/converting-fsharp-csharp/"><meta name="headline" content="Converting between F# and C# types - Breaking down conversions between C# and F# collections and functions"><link rel="icon" type="image/png" href="/img/favicon16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon32.png" sizes="32x32"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@DevonBurriss"><meta name="twitter:title" content="Converting between F# and C# types"><meta name="twitter:description" content="In this post we look at converting between F# collections like Seq, List, Array and common C# collections and interfaces."><meta name="twitter:creator" content="@DevonBurriss"><meta name="twitter:image" content="https://devonburriss.me/img/posts/2020/fsharp512sharp.png"><meta property="og:title" content="Converting between F# and C# types"><meta property="og:type" content="article"><meta property="og:url" content="https://devonburriss.me/converting-fsharp-csharp/"><meta property="og:image" content="https://devonburriss.me/img/posts/2020/fsharp512sharp.png"><meta property="og:description" content="In this post we look at converting between F# collections like Seq, List, Array and common C# collections and interfaces."><meta property="og:site_name" content="Devon Burriss&#39; Blog"><link rel="stylesheet" href="/css/site.css"><link rel="stylesheet" href="/css/highlight/atom-one-dark.css"><script>(function(){try{var t=localStorage.getItem('theme');if(t==='dark'||t==='light'){document.documentElement.dataset.theme=t;}}catch(e){}})();</script><script src="/js/theme.js" defer="defer"></script><script type="module" src="/js/search-ui.js"></script></head><body><header class="site-header"><nav class="site-nav"><a class="site-title nav-badge" href="/">DEVON BURRISS</a><ul class="site-links"><li><a href="/">Home</a></li><li><a href="/topics/">Topics</a></li><li><a href="/notes/">Notes</a></li><li><a href="/recommended-reading.html">Reading</a></li><li><a href="/about/">About</a></li><li><a href="/rss.xml">RSS</a></li></ul><button type="button" class="theme-toggle" id="theme-toggle" aria-label="Toggle light/dark theme">Theme</button></nav></header><main class="site-main"><span style="display:contents"><header class="page-header"><h1>Converting between F# and C# types</h1><p class="page-subtitle">Breaking down conversions between C# and F# collections and functions</p><p class="post-meta">Devon Burriss &#183; May 05, 2020</p></header><div class="topic-pills"><a class="topic-pill" href="/topics/platforms-runtime/" title="Runtimes and execution environments (not frameworks).">Platforms &amp; Runtime</a></div><hr></span><article class="prose"><p>Every now and again in F# you run into needing to convert a <code>Seq</code> to something like <code>IList&lt;&gt;</code>. Depending on how often you do this, and if you are like me, you will need to search for this or try different things for longer than you would care to admit. So if nothing else, here I am capturing for myself how to tackle some of these conversions.</p>
<!--more-->
<h2 id="tldr">TL;DR</h2>
<p>For the sake of this post being a reference post, I am going to post this class which captures a lot of the conversions. Here I try and capture the C# type as the type most closely related to an F# type, if that makes sense. In most cases, this is an <code>'T array</code>, since this is equivalent to a <code>'T []</code> array in C#. I do encourage you to read the rest of the article at least once, as I will try break down the types a bit so in the future it should be easier to figure out the conversions yourself.</p>
<p>For many of these, you will need to convert to <code>seq</code> and then to the F# type you want to work with. If that is not acceptable perhaps do it yourself with a loop.</p>
<!-- | From                 | To                 | Conversion                           |
| -------------------- | ------------------ | ------------------------------------ |
| `IEnumerable<int>`   | `int seq`          | alias for                            |
| `List<int>`          | `ResizeArray`      | alias for                            |
| `IEnumerable`        | `seq`              | `Seq.cast`                           |
| `IEnumerable`        | `int array`        | `Seq.cast \|> Seq.toArray`           |
| `IEnumerable`        | `int list`         | `Seq.cast \|> Seq.toList`            |
| `ICollection<int>`   | `int seq`          | `:> seq<_>`                          |
| `IList<int>`         | `int seq`          | `:> seq<_>`                          |
| `int []`             | `int array`        | alias for                            |
| `System.Array`       | `obj seq`          | `System.Linq.Enumerable.OfType<obj>` |
| `seq`/`array`/`list` | `ResizeArray`      | `ResizeArray` ctor                   |
| `int seq`            | `IEnumerable`      | `:> IEnumerable`                     |
| `int array`          | `ICollection<int>` | `:> ICollection<int>`                |
| `ResizeArray`        | `ICollection<int>` | `:> ICollection<int>`                |
| `ResizeArray`        | `IList<int>`       | `:> IList<int>`                      |
| `ResizeArray`        | `int seq`          | `:> seq<_>`                          |
| `ResizeArray`        | `int array`        | `.ToArray()` instance method         |
| `f: unit -> int`     | `Func<int>`        | `Func<int>(f)` ctor                  |
| `Func<int>`          | `unit -> int`      | `fun () -> f.Invoke()`               | -->
<table>
<thead>
<tr>
<th>From</th>
<th>To</th>
<th>Conversion</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>IEnumerable&lt;int&gt;</code></td>
<td><code>int seq</code></td>
<td>alias for</td>
</tr>
<tr>
<td><code>List&lt;int&gt;</code></td>
<td><code>ResizeArray</code></td>
<td>alias for</td>
</tr>
<tr>
<td><code>IEnumerable</code></td>
<td><code>seq</code></td>
<td><code>Seq.cast</code></td>
</tr>
<tr>
<td><code>IEnumerable</code></td>
<td><code>int array</code></td>
<td><code>Seq.cast &#124;&gt; Seq.toArray</code></td>
</tr>
<tr>
<td><code>IEnumerable</code></td>
<td><code>int list</code></td>
<td><code>Seq.cast &#124;&gt; Seq.toList</code></td>
</tr>
<tr>
<td><code>ICollection&lt;int&gt;</code></td>
<td><code>int seq</code></td>
<td><code>:&gt; seq&lt;_&gt;</code></td>
</tr>
<tr>
<td><code>IList&lt;int&gt;</code></td>
<td><code>int seq</code></td>
<td><code>:&gt; seq&lt;_&gt;</code></td>
</tr>
<tr>
<td><code>int []</code></td>
<td><code>int array</code></td>
<td>alias for</td>
</tr>
<tr>
<td><code>System.Array</code></td>
<td><code>obj seq</code></td>
<td><code>System.Linq.Enumerable.OfType&lt;obj&gt;</code></td>
</tr>
<tr>
<td><code>seq</code>/<code>array</code>/<code>list</code></td>
<td><code>ResizeArray</code></td>
<td><code>ResizeArray</code> ctor</td>
</tr>
<tr>
<td><code>int seq</code></td>
<td><code>IEnumerable</code></td>
<td><code>:&gt; IEnumerable</code></td>
</tr>
<tr>
<td><code>int array</code></td>
<td><code>ICollection&lt;int&gt;</code></td>
<td><code>:&gt; ICollection&lt;int&gt;</code></td>
</tr>
<tr>
<td><code>ResizeArray</code></td>
<td><code>ICollection&lt;int&gt;</code></td>
<td><code>:&gt; ICollection&lt;int&gt;</code></td>
</tr>
<tr>
<td><code>ResizeArray</code></td>
<td><code>IList&lt;int&gt;</code></td>
<td><code>:&gt; IList&lt;int&gt;</code></td>
</tr>
<tr>
<td><code>ResizeArray</code></td>
<td><code>int seq</code></td>
<td><code>:&gt; seq&lt;_&gt;</code></td>
</tr>
<tr>
<td><code>ResizeArray</code></td>
<td><code>int array</code></td>
<td><code>.ToArray()</code> instance method</td>
</tr>
<tr>
<td><code>f: unit -&gt; int</code></td>
<td><code>Func&lt;int&gt;</code></td>
<td><code>Func&lt;int&gt;(f)</code> ctor</td>
</tr>
<tr>
<td><code>Func&lt;int&gt;</code></td>
<td><code>unit -&gt; int</code></td>
<td><code>fun () -&gt; f.Invoke()</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>For those that can be cast with <code>:&gt; seq&lt;_&gt;</code> like <code>ICollection&lt;&gt;</code> and <code>IList&lt;&gt;</code> you can use directly with the <code>Seq</code> module functions like <code>toList</code>, since those interfaces implement <code>IEnumerable&lt;&gt;</code>.</p>
</blockquote>
<h3 id="example">Example</h3>
<pre><code class="language-fsharp">// This is for demonstration purposes only
type CSharpyType() =
    // seq&lt;int&gt;
    let mutable enumerableTProp = Seq.empty
    // seq&lt;obj&gt;
    let mutable enumerableProp = Seq.empty
    // int []
    let mutable arrayTProp = Array.empty
    // obj []
    let mutable arrayProp = Array.empty
    // int list
    let mutable listTProp = ResizeArray()
    // int []
    let mutable ilistTProp  = Array.empty
    // int []
    let mutable icollectionTProp = Array.empty
    // unit -&gt; DateTimeOffset
    let mutable dtFun = fun () -&gt; System.DateTimeOffset.UtcNow
    // Convert between expressions: http://www.fssnip.net/ts/title/F-lambda-to-C-LINQ-Expression
    
    member _.IEnumerableTProp 
        with get() : System.Collections.Generic.IEnumerable&lt;int&gt; = enumerableTProp
        and set(v : System.Collections.Generic.IEnumerable&lt;int&gt;) = enumerableTProp &lt;- v 
    
    member _.IEnumerableProp 
        with get() : System.Collections.IEnumerable = enumerableProp :&gt; System.Collections.IEnumerable
        and set(v : System.Collections.IEnumerable ) = enumerableProp &lt;- v |&gt; Seq.cast

    member _.ArrayTProp 
        with get() : int[] = arrayTProp
        and set(v  : int[]) = arrayTProp &lt;- v 

    member _.ArrayProp   
        with get() : System.Array = arrayProp :&gt; System.Array
        and set(v : System.Array) = arrayProp &lt;- v |&gt; System.Linq.Enumerable.OfType&lt;obj&gt; |&gt; Seq.toArray

    member _.ListTProp 
        with get() : System.Collections.Generic.List&lt;int&gt; = listTProp
        and set(v : System.Collections.Generic.List&lt;int&gt;) = listTProp &lt;- v

    member _.ICollectionTProp 
        with get() : System.Collections.Generic.ICollection&lt;int&gt; = icollectionTProp :&gt; System.Collections.Generic.ICollection&lt;int&gt;
        and set(v : System.Collections.Generic.ICollection&lt;int&gt;) = icollectionTProp &lt;- v |&gt; Seq.toArray

    member _.IListTProp 
        with get() : System.Collections.Generic.IList&lt;int&gt; = ilistTProp :&gt; System.Collections.Generic.IList&lt;int&gt;
        and set(v : System.Collections.Generic.IList&lt;int&gt;) = ilistTProp &lt;- v |&gt; Seq.toArray

    member _.FuncProp 
        with get() : System.Func&lt;System.DateTimeOffset&gt; = System.Func&lt;System.DateTimeOffset&gt;(dtFun)
        and set(f : System.Func&lt;System.DateTimeOffset&gt;) = dtFun &lt;- fun () -&gt; f.Invoke()
</code></pre>
<h2 id="breakdown">Breakdown</h2>
<p>Well done for pushing past just copy pasting the code you need from above. We will go through the F# types and see what interfaces they implement, as well as if they have corresponding types in .NET BCL types.</p>
<h3 id="system.collections.generic.ienumerable">System.Collections.Generic.IEnumerable&lt;_&gt;</h3>
<p>So as a <code>type</code>, <a href="https://github.com/fsharp/fsharp/blob/3bc41f9e10f9abbdc1216e984a98e91aad351cff/src/fsharp/FSharp.Core/prim-types.fs#L3287"><code>seq&lt;'T&gt;</code> is an alias for <code>IEnumerable&lt;'T&gt;</code> in FSharp.Core</a>.</p>
<pre><code class="language-fsharp">// FSharp.Core
type seq&lt;'T&gt; = IEnumerable&lt;'T&gt;
</code></pre>
<p>If you are just getting started with F#, you may have noticed that it can be a lot more particular about it's types than C#. It can be easy to forget that this actually works. You can assign <code>'a list</code> or <code>'a array</code> to a <code>seq</code>.</p>
<pre><code class="language-fsharp">let mutable ss = seq { 1; 2 }
ss &lt;- [1;2]
ss &lt;- [|1;2|]
</code></pre>
<p>This is because <code>seq</code> is <code>IEnumerable&lt;'T&gt;</code> and <code>'a list</code> and <code>'a array</code> implement <code>IEnumerable&lt;'T&gt;</code>.</p>
<pre><code class="language-fsharp">// FSharp.Core
type List&lt;'T&gt; = 
       | ([])  :                  'T list
       | (::)  : Head: 'T * Tail: 'T list -&gt; 'T list
       interface System.Collections.Generic.IEnumerable&lt;'T&gt;
       interface System.Collections.IEnumerable
       interface System.Collections.Generic.IReadOnlyCollection&lt;'T&gt;
       interface System.Collections.Generic.IReadOnlyList&lt;'T&gt;
</code></pre>
<p>As it turns out, this gets us a very long way with interacting with C#, since <code>IEnumerable</code> and <code>IEnumerable&lt;'T&gt;</code> are pretty ubiquitous.</p>
<pre><code class="language-fsharp">let csharp = CSharpyType()
csharp.IEnumerableTProp &lt;- seq { 0..10 }
csharp.IEnumerableTProp &lt;- [0..10]
csharp.IEnumerableTProp &lt;- [|0..10|]
</code></pre>
<p>So, working with <code>IEnumerable&lt;'T&gt;</code> in F# is as simple as using <code>seq</code>.</p>
<h3 id="system.collections.ienumerable">System.Collections.IEnumerable</h3>
<p>For working with <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.ienumerable?view=netcore-3.1">System.Collections.IEnumerable</a> we can make use of a function on the <code>Seq</code> module, <code>Seq.cast</code>. This takes an <code>System.Collections.IEnumerable</code> and turns it into a <code>seq</code>. Now it is in a more natural form for working with in F#.<br />
In terms of assigning, <code>'a seq</code>, <code>'a list</code>, and <code>'a array</code> can be assigned to it, since they all implement <code>IEnumerable</code>.</p>
<pre><code class="language-fsharp">let csharp = CSharpyType()
csharp.IEnumerableProp &lt;- seq { 0..10 }
csharp.IEnumerableProp &lt;- [0..10]
csharp.IEnumerableProp &lt;- [|0..10|]
</code></pre>
<p>It is worth noting we can also just use them in the usual constructs like:</p>
<pre><code class="language-fsharp">for i in (csharp.IEnumerableProp) do 
    printfn &quot;i: %A&quot; i
</code></pre>
<h3 id="int">int []</h3>
<p>With a typed array, we can just use <code>'T array</code> <a href="https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/arrays">since they are the same</a> across F# and the .NET BCL.</p>
<pre><code class="language-fsharp">let csharp = CSharpyType()
csharp.ArrayTProp &lt;- [|0..10|]
//csharp.ArrayTProp &lt;- seq {0..10} // Compile error: This expression was expected to have type 'int []' but here has type 'seq&lt;int&gt;'
</code></pre>
<p>Make use of whatever you need from the <code>Array</code> module.</p>
<h3 id="system.array">System.Array</h3>
<p>The above is still true when using <code>System.Array</code>.</p>
<pre><code class="language-fsharp">let csharp = CSharpyType()
csharp.ArrayProp &lt;- [|0..10|]
</code></pre>
<p>When trying to assign an instance of this type to an F# value you will need to give it a <code>Type</code>. This can be done using a static method out of <code>Linq</code> to get us an <code>IEnumerable&lt;'T&gt;</code> ie <code>seq</code>, like so: <code>arr |&gt; System.Linq.Enumerable.OfType&lt;obj&gt;</code>. From there you can make use of the functions in the <code>Seq</code> module.</p>
<h3 id="system.collections.generic.list">System.Collections.Generic.List&lt;_&gt;</h3>
<p>It can be confusing initially since <code>list</code> in F# is not the same as <code>List&lt;&gt;</code> in C#. The equivalent of a <a href="https://github.com/fsharp/fsharp/blob/3bc41f9e10f9abbdc1216e984a98e91aad351cff/src/fsharp/FSharp.Core/prim-types.fs#L3129">C# list in F# is <code>ResizeArray</code></a>.</p>
<pre><code class="language-fsharp">// FSharp.Core
type ResizeArray&lt;'T&gt; = System.Collections.Generic.List&lt;'T&gt;
</code></pre>
<p>You can convert F# types to a <code>ResizeArray</code>.</p>
<pre><code class="language-fsharp">csharp.ListTProp &lt;- [0..10] |&gt; ResizeArray
csharp.ListTProp &lt;- [|0..10|] |&gt; ResizeArray
csharp.ListTProp &lt;- seq { 0..10 } |&gt; ResizeArray
</code></pre>
<p>And of course remember that <code>List&lt;'T&gt;</code> implements <code>IEnumerable&lt;'T&gt;</code> and <code>ICollection&lt;'T&gt;</code>, which we will look at next.</p>
<h3 id="system.collections.generic.icollection-ilist">System.Collections.Generic.ICollection&lt;<em>&gt; &amp; IList&lt;</em>&gt;</h3>
<p>Remember that <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/generics-and-arrays">array</a> and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1?view=netcore-3.1"><code>List&lt;'T&gt;</code></a> aka <code>ResizeArray</code> already implement <code>IEnumerable&lt;'T&gt;</code>, <code>ICollection&lt;'T&gt;</code>, and <code>IList&lt;'T&gt;</code>.</p>
<pre><code class="language-fsharp">csharp.ICollectionTProp &lt;- [|0..10|]
csharp.ICollectionTProp &lt;- [|0..10|] |&gt; ResizeArray

csharp.IListTProp &lt;- [|0..10|]
csharp.IListTProp &lt;- [|0..10|] |&gt; ResizeArray
</code></pre>
<h3 id="resizearray">ResizeArray</h3>
<p>One thing you might be left wondering is converting from a ResizeArray, back to more natural F# types.</p>
<pre><code class="language-fsharp">let resizeArr = [0..10] |&gt; ResizeArray
let xs = resizeArr :&gt; seq&lt;_&gt; // Implements IEnumerable&lt;T&gt; so we can just cast
let arr = resizeArr.ToArray() // ResizeArray / List&lt;T&gt; has a `ToArray` method. This is an O(n) activity.
let lst = xs |&gt; Seq.toList // Once we have a seq, we can use Seq functions
</code></pre>
<h3 id="bonus-system.func">Bonus: System.Func&lt;_&gt;</h3>
<p>Another kind of conversion I often find myself doing when working with C# APIs is with <code>Func</code> and F# functions. Converting a F# function to a <code>Func</code> is as simple as passing it into the <code>Func</code> constructor if need be. We can often simply assign a F# function to a <code>Func</code> and the compiler will handle that.</p>
<pre><code class="language-fsharp">csharp.FuncProp &lt;- (fun () -&gt; System.DateTimeOffset.UnixEpoch)
let f = fun () -&gt; csharp.FuncProp.Invoke()
</code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>So that is my potted run through of converting between F# and C# types. This was meant to be more of a reference than a post that teaches or tells a story so I hope the lack of continuity was not too off-putting.</p>
</article><hr><nav class="pager"><ul class="pager-links"><li><a href="/reliability-with-intents/" title="Reliability with Intents">← Previous</a></li><li><a href="/prometheus-parser-fennel/" title="Creating a Prometheus parser: Fennel">Next →</a></li></ul></nav></main><footer class="site-footer"><p>Copyright &#169; <a href="/about/">Devon Burriss</a> 2026</p></footer><div class="comments"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'devonburriss';(function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://devonburriss.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45750611-2', 'auto');ga('send', 'pageview');</script></body></html>